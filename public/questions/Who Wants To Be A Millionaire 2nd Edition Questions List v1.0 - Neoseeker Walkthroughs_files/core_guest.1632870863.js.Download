 document.domain=location.host.replace(/^.*?([^.]+\.[^.]+)$/g,'$1');function setCookie(name,value,expires,path,domain,secure){var curCookie=name+"="+encodeURIComponent(value)+
((expires)?"; expires="+expires.toGMTString():"")+
((path)?"; path="+path:"")+
((domain)?"; domain="+domain:"")+
((secure)?"; secure":"");document.cookie=curCookie;}
function getCookie(name){var dc=document.cookie;var prefix=name+"=";var begin=dc.indexOf("; "+prefix);if(begin==-1){begin=dc.indexOf(prefix);if(begin!=0)return null;}else
begin+=2;var end=document.cookie.indexOf(";",begin);if(end==-1)
end=dc.length;return decodeURIComponent(dc.substring(begin+prefix.length,end));}
function getSelectionText(){var text="";if(window.getSelection){text=window.getSelection().toString();}else if(document.selection&&document.selection.type!="Control"){text=document.selection.createRange().text;}
return text;}
function getSelectionNode(){var node;if(window.getSelection){node=window.getSelection().anchorNode.parentNode;}else if(document.selection&&document.selection.type!="Control"){node=document.selection.createRange().parentElement();}
return node;}
$.fn.extend({placeCursorAtEnd:function(){return this.each(function(){if($(this).not(':text,textarea')){return;}
$(this).focus();if(this.setSelectionRange){var len=$(this).val().length*2;this.setSelectionRange(len,len);}else{$(this).val($(this).val());}
this.scrollTop=999999;});},addLoadingFade:function(opacity){var opacity=opacity||0.5;$(this).fadeTo('fast',opacity);},resetLoadingFade:function(){$(this).fadeTo('fast',1);},addLoadingOverlay:function(size){$('html').addClass('busy');if(!this.length||BrowserDetect.show_mobile_mode()){return;}
var sz=(!size)?'large':size;$('body').append('<div id="loadingOverlayText" class="overlay-'+sz+'"><i class="loading icon-spinner icon-spin '+(sz=='large'?'icon-2x':'icon-lg')+'"></i></div>');if(!BrowserDetect.show_mobile_mode()){$('#loadingOverlayText').offset({top:$(this).offset().top,left:$(this).offset().left}).width($(this).width()).height($(this).height());$(this).addLoadingFade(0.3);}},resetLoadingOverlay:function(){$('html').removeClass('busy');if(!this.length||BrowserDetect.show_mobile_mode()){return;}
$('#loadingOverlayText').remove();$(this).resetLoadingFade(1);},enableLoadingState:function(opts){if(!$(this).is(':input,:button,a.btn')){return null;}
$(this).prop('disabled',true);var options=$.extend({},{loadingText:'Loading...'},opts);if(options.loadingText){$(this).data('preloading_contents',$(this).html());$(this).html(options.loadingText);}
$('html').addClass('busy');},resetLoadingState:function(opts){if(!$(this).is(':input,:button,a.btn')){return null;}
$(this).prop('disabled',false);var options=$.extend({},{revert:true},opts);var contents=$(this).data('preloading_contents');if(contents&&options.revert){$(this).removeData('preloading_contents');$(this).html(contents);}
$('html').removeClass('busy');},enableLoadingStateOnForm:function(opts){if(!$(this).is('form')){return null;}
$(':input,:button,.btn',this).prop('disabled',true);var options=$.extend({},{icon_placeholder:null},opts);if(options.icon_placeholder){$(this).data('loadingIcon_replacement',$(options.icon_placeholder,this).contents());$(options.icon_placeholder,this).html('<i class="loading icon-spinner icon-spin"></i>');}
$('html').addClass('busy');},resetLoadingStateOnForm:function(){$('html').removeClass('busy');if(!$(this).is('form')){return null;}
$(':input,:button,.btn',this).prop('disabled',false);var replacement=$(this).data('loadingIcon_replacement');if(typeof replacement!='undefined'){$('i.loading',this).parent().html(replacement);$(this).removeData('loadingIcon_replacement');}}});String.prototype.capitalize=function(){return this.charAt(0).toUpperCase()+this.slice(1);};String.prototype.urlencode=function(){return encodeURIComponent(this);};String.prototype.escape=function(){return this.replace(/&/g,"&amp;").replace(/>/g,"&gt;").replace(/</g,"&lt;").replace(/"/g,"&quot;");};String.prototype.escape_anchor=function(a_attrs){return this.replace(/<a/g,"</a#><a").replace(/<\/a>/g,"</a><a "+a_attrs+'>').replace(/<\/a#>/,'</a>');};String.prototype.length_with_bitly_url=function(){if(this.indexOf('http')==-1){return this.length;}
var regPatt=new RegExp(/https?:\/\/[0-9a-zA-Z\[\]\-_\/\.&=\?\+%~\$,#;:%!()'@]+/gm);var urlStr=this.replace(regPatt,'http://bit.ly/V2Y1Fr');return urlStr.length;};String.prototype.get_domain_from_url=function(trim_www){var domain=this.replace(/^https?:\/\/([^/]+)\/?(.*)/,"$1");if(trim_www&&domain.indexOf('www.')!=-1){domain=domain.replace(/^www\./,'');}
return domain;};Array.prototype.unique=function(){return this.filter(function(value,index,self){return self.indexOf(value)===index;});};var BrowserDetect={init:function(){this.browser=this.searchString(this.dataBrowser)||"An unknown browser";this.version=this.searchVersion(navigator.userAgent)||this.searchVersion(navigator.appVersion)||"an unknown version";},show_mobile_mode:function(){return $("html").data('in_mode')=='mobile';},is_playstation:function(){return(navigator.userAgent.indexOf('PLAYSTATION 3')!=-1);},is_ios:function(){var ua=navigator.userAgent.toLowerCase();if((ua.indexOf('iphone;')>-1||ua.indexOf('ipad;')>-1||ua.indexOf('ipod touch;')>-1)&&ua.indexOf('mobile')>-1){return true;}else if(navigator.maxTouchPoints>0){return true;}
return false;},is_iphone_mozilla:function(){var ua=navigator.userAgent.toLowerCase();return(ua.indexOf('iphone;')>-1&&ua.indexOf('mobile')>-1&&(ua.indexOf('version/')>-1||ua.indexOf('fxios/')>-1)&&ua.indexOf('CriOS/')==-1);},is_android_mobile:function(){var ua=navigator.userAgent.toLowerCase();return(ua.indexOf('android')>-1&&ua.indexOf('mobile')>-1);},searchString:function(data){for(var i=0;i<data.length;i++){var dataString=data[i].string;var dataProp=data[i].prop;this.versionSearchString=data[i].versionSearch||data[i].identity;if(dataString){if(dataString.indexOf(data[i].subString)!=-1)
return data[i].identity;}
else if(dataProp)
return data[i].identity;}},searchVersion:function(dataString){var index=dataString.indexOf(this.versionSearchString);if(index==-1)return;return parseFloat(dataString.substring(index+this.versionSearchString.length+1));},dataBrowser:[{string:navigator.userAgent,subString:"Chrome",identity:"Chrome"},{string:navigator.vendor,subString:"Apple",identity:"Safari",versionSearch:"Version"},{prop:window.opera,identity:"Opera"},{string:navigator.userAgent,subString:"Firefox",identity:"Firefox"},{string:navigator.userAgent,subString:"MSIE",identity:"Explorer",versionSearch:"MSIE"}]};BrowserDetect.init();isHTML5=(!!navigator.geolocation);allowContentEditable=false;$(function(){$(document).on('click','div[contenteditable="true"] a[href="#"]',function(e){e.preventDefault();return false;});$.scrollToIfNotVisible=function(scrollToEl,easing,options){var el_offset=$(scrollToEl).offset();var window_top=$(document).scrollTop();var window_bottom=window_top+$(window).height();if(el_offset.top>window_bottom||el_offset.top<window_top){$.scrollTo(scrollToEl,easing,options);}};$.loadingModal={show:function(opts){var bs_ver=($.fn.modal.Constructor.VERSION||'').substr(0,1);var options=$.extend({},{msgBody:'Please wait.'},opts);var htmlStr='<div class="modal fade" id="loading_modal">'+(bs_ver>2?'<div class="modal-dialog"><div class="modal-content">':'')+'<div class="modal-header"><h3><i class="loading icon-spinner icon-spin"></i> Loading...</h3></div><div class="modal-body">'+options.msgBody+'</div>'+(bs_ver>2?'</div></div>':'')+'</div>';$('body').append(htmlStr);$('#loading_modal').modal('show');},hide:function(){$('#loading_modal').modal('hide').remove();}};$('body').on('click','.btn-group[data-toggle="buttons-radio"] :button',function(){var checked=$(this).hasClass('active');$(this).siblings(':button').removeClass('active');if(!checked){$(this).addClass('active').trigger('checked');}}).on('click','.btn-group[data-toggle="buttons-radio-checkbox"] :button',function(){var checked=$(this).hasClass('active');$(this).siblings(':button').removeClass('active');if(checked){$(this).removeClass('active').trigger('unchecked');}else{$(this).addClass('active').trigger('checked');}});});function isScrolledIntoView(elem,pane){if(pane){var docViewTop=$(pane).scrollTop();var docViewBottom=docViewTop+$(pane).height();var elemTop=$(elem,pane).offset().top;var elemBottom=elemTop+$(elem,pane).height();}else{var docViewTop=$(window).scrollTop();var docViewBottom=docViewTop+$(window).height();var elemTop=$(elem).offset().top;var elemBottom=elemTop+$(elem).height();}
return((elemBottom>=docViewTop)&&(elemTop<=docViewBottom));}
(function($){$.timeago=function(timestamp){if(timestamp instanceof Date){return inWords(timestamp);}else if(typeof timestamp==="string"){return inWords($.timeago.parse(timestamp));}else{return inWords($.timeago.datetime(timestamp));}};var $t=$.timeago;$.extend($.timeago,{settings:{refreshMillis:60000,allowFuture:false,strings:{prefixAgo:null,prefixFromNow:null,suffixAgo:"ago",suffixFromNow:"from now",seconds:"less than a minute",minute:"about a minute",minutes:"%d minutes",hour:"about an hour",hours:"about %d hours",day:"a day",days:"%d days",month:"about a month",months:"%d months",year:"about a year",years:"%d years",numbers:[]}},inWords:function(distanceMillis){var $l=this.settings.strings;var prefix=$l.prefixAgo;var suffix=$l.suffixAgo;if(this.settings.allowFuture){if(distanceMillis<0){prefix=$l.prefixFromNow;suffix=$l.suffixFromNow;}
distanceMillis=Math.abs(distanceMillis);}
var seconds=distanceMillis / 1000;var minutes=seconds / 60;var hours=minutes / 60;var days=hours / 24;var years=days / 365;function substitute(stringOrFunction,number){var string=$.isFunction(stringOrFunction)?stringOrFunction(number,distanceMillis):stringOrFunction;var value=($l.numbers&&$l.numbers[number])||number;return string.replace(/%d/i,value);}
var words=seconds<45&&substitute($l.seconds,Math.round(seconds))||seconds<90&&substitute($l.minute,1)||minutes<45&&substitute($l.minutes,Math.round(minutes))||minutes<90&&substitute($l.hour,1)||hours<24&&substitute($l.hours,Math.round(hours))||hours<48&&substitute($l.day,1)||days<30&&substitute($l.days,Math.floor(days))||days<60&&substitute($l.month,1)||days<365&&substitute($l.months,Math.floor(days / 30))||years<2&&substitute($l.year,1)||substitute($l.years,Math.floor(years));return $.trim([prefix,words,suffix].join(" "));},parse:function(iso8601){var s=$.trim(iso8601);s=s.replace(/\.\d\d\d+/,"");s=s.replace(/-/,"/").replace(/-/,"/");s=s.replace(/T/," ").replace(/Z/," UTC");s=s.replace(/([\+\-]\d\d)\:?(\d\d)/," $1$2");return new Date(s);},datetime:function(elem){var isTime=$(elem).get(0).tagName.toLowerCase()==="time";var iso8601=isTime?$(elem).attr("datetime"):$(elem).attr("title");return $t.parse(iso8601);}});$.fn.timeago=function(){var self=this;self.each(refresh);var $s=$t.settings;if($s.refreshMillis>0){setInterval(function(){self.each(refresh);},$s.refreshMillis);}
return self;};function refresh(){var data=prepareData(this);if(!isNaN(data.datetime)){$(this).text(inWords(data.datetime));}
return this;}
function prepareData(element){element=$(element);if(!element.data("timeago")){element.data("timeago",{datetime:$t.datetime(element)});var text=$.trim(element.text());if(text.length>0){element.attr("title",text);}}
return element.data("timeago");}
function inWords(date){return $t.inWords(distance(date));}
function distance(date){return(new Date().getTime()-date.getTime());}
document.createElement("abbr");document.createElement("time");}(jQuery));function flipshow(input_button){var show_spoiler=false,spoiler_root=find_spoiler_root(input_button),child_nodes=spoiler_root.childNodes,child_node_count=child_nodes.length;if(input_button.value==="Show Spoiler"){input_button.value="Hide Spoiler";show_spoiler=true;}else{input_button.value="Show Spoiler";}
for(var i=0;i<child_node_count;++i){if(child_nodes[i].className==="spoiler"){if(show_spoiler){child_nodes[i].style.display="block";}else{child_nodes[i].style.display="none";}
break;}}
if(show_spoiler){$(input_button).siblings('.spoiler').children('.show_spoiler').children('iframe').each(resize_video_iframe);}}
function find_spoiler_root(input_button){var parent_node;parent_node=input_button.parentNode;while(parent_node&&parent_node.className!=="spoiler_header"){parent_node=parent_node.parentNode;}
return parent_node;}
var clientPC=navigator.userAgent.toLowerCase();var clientVer=parseInt(navigator.appVersion);var is_ie=((clientPC.indexOf("msie")!=-1)&&(clientPC.indexOf("opera")==-1));var is_nav=((clientPC.indexOf('mozilla')!=-1)&&(clientPC.indexOf('spoofer')==-1)&&(clientPC.indexOf('compatible')==-1)&&(clientPC.indexOf('opera')==-1)&&(clientPC.indexOf('webtv')==-1)&&(clientPC.indexOf('hotjava')==-1));var is_moz=0;var is_win=((clientPC.indexOf("win")!=-1)||(clientPC.indexOf("16bit")!=-1));var is_mac=(clientPC.indexOf("mac")!=-1);var _isIE7=(navigator.userAgent.indexOf('MSIE 7')>0);var selectedtxt='',posttextareaid;function getcursor(txt){selectedtxt=(document.all)?document.selection.createRange().text:window.getSelection();if(txt.createTextRange)
txt.caretPos=document.selection.createRange().duplicate();return true;}
function addtxt(e,opentag,closetag,strOnly){var targ;if(!e)var e=window.event;if(e.target)targ=e.target;else if(e.srcElement)targ=e.srcElement;if(targ.nodeType==3)
targ=targ.parentNode;var cursorpos;var str='';var formEl=findparent(targ,'form');if(!closetag){closetag='';}
var posttextarea;if(posttextareaid&&document.getElementById(posttextareaid)){posttextarea=document.getElementById(posttextareaid);}
if(posttextarea==null){posttextarea=formEl.body;if(typeof(posttextarea)=='undefined'){posttextarea=formEl.message}
if(typeof(posttextarea)=='undefined'){posttextarea=formEl.comment}
if(typeof(posttextarea)=='undefined'){posttextarea=formEl.text}}
posttextarea.focus();if((clientVer>=4)&&is_ie&&is_win){cursorpos=posttextarea.caretPos;if(document.selection&&document.selection.type!='None'){var rng=document.selection.createRange();rng.text=opentag+rng.text+closetag;}else{var currentSelection=$(posttextarea).getSelection();var currentCursorPosition=currentSelection.start;if(typeof(cursorpos)=='undefined'){posttextarea.value=posttextarea.value+opentag+closetag;}else{str=opentag+selectedtxt+closetag;cursorpos.text=cursorpos.text.charAt(cursorpos.text.length-1)==' '?str+' ':str;}
var newCursorPosition=currentCursorPosition+opentag.length;$(posttextarea).setSelection(newCursorPosition,newCursorPosition);}
posttextarea.focus();}else if((document.getElementById)||(posttextarea.selectionEnd&&(posttextarea.selectionEnd-posttextarea.selectionStart>0))){if(strOnly){return mozWrap(posttextarea,opentag,closetag,strOnly);}else{mozWrap(posttextarea,opentag,closetag);}
posttextarea.focus();return'';}else{if(strOnly){return'';}
posttextarea.value+=opentag+closetag;posttextarea.focus();}
if(strOnly){return str;}
return'';}
function mozWrap(posttextarea,open,close,strOnly){var scrollTop,scrollLeft;if(posttextarea.type=='textarea'&&typeof posttextarea.scrollTop!='undefined'){scrollTop=posttextarea.scrollTop;scrollLeft=posttextarea.scrollLeft;}
var selLength=posttextarea.textLength;var selStart=posttextarea.selectionStart;var selEnd=posttextarea.selectionEnd;var s1=(posttextarea.value).substring(0,selStart);var s2=posttextarea.value.substring(selStart,posttextarea.selectionEnd)
var s3=(posttextarea.value).substring(selEnd,selLength);if(strOnly){return s2;}
posttextarea.value=s1+open+s2+close+s3;if(typeof scrollTop!='undefined'){posttextarea.scrollTop=scrollTop;posttextarea.scrollLeft=scrollLeft;}
if(s2.length>0){var newWordLength=close.length+s2.length+open.length;var cursorNewPosition=selStart+newWordLength;}else{var cursorNewPosition=selStart+open.length;}
posttextarea.focus();$(posttextarea).setSelection(cursorNewPosition,cursorNewPosition);return false;}
function addmarkup(event,code){addtxt(event,'['+code+']','[/'+code+']');}
function add_wikimarkup(event,code){addtxt(event,code,code);}
function addlink(event){var linktxt=addtxt(event,'','',true);var linkres=false;var linkurl=false;if(linktxt.match(/https?:\/\/\S+/)){linkres=prompt('Enter link name:');linkurl=true;}else{linkres=prompt('Enter link URL:');linkurl=false;}
if(linkres===false){return;}
if(linkres==null){linkres='';}
if(linkres){if(!String.prototype.trim){linkres=$.trim(linkres);}else{linkres=linkres.trim();}
if(linkurl){addtxt(event,'[link name='+linkres+']','[/link]');}else{addtxt(event,'[link name=',']'+linkres+'[/link]');}}}
function addmarkup_from_select(event,formselect,code,value){if(code){if(code=='code'&&value=='pre tag'){addmarkup(event,'pre');}else if(code=='size'&&(value=='sub'||value=='sup')){addmarkup(event,value);}else{addtxt(event,'['+code+(value?'='+value:'')+']','[/'+code+']');}
if(formselect){formselect.selectedIndex=0;}}}
function add_wikimarkup_from_select(event,formselect,code){if(code){add_wikimarkup(event,code);formselect.selectedIndex=0;}}
function adddiv(event,formselect,align){if(align){addtxt(event,'[div align='+align+']','[/div]');formselect.selectedIndex=0;}}
function addimage(event,link){if(link){var imageres=prompt('Enter the URL of the image source:').trim();if(imageres){return addtxt(event,'[img link=',']'+imageres+'[/img]');}}else if(BrowserDetect.show_mobile_mode()){var imgsrc=prompt('Enter the URL of the image source:');if(imgsrc){return addtxt(event,'[img]'+$.trim(imgsrc)+'[/img]');}}
return addtxt(event,'[img]','[/img]');}
function addtag_withprompt(event,tagName,promptText,promptFieldDefaultValue=''){var tagAlertName=tagName.substr(0,1).toUpperCase()+tagName.substr(1);var tagprompt=prompt(promptText,promptFieldDefaultValue);if(tagprompt){if(!String.prototype.trim){tagprompt=$.trim(tagprompt);}else{tagprompt=tagprompt.trim();}
switch(tagName){case'spoiler':addtxt(event,'['+tagName+'='+tagprompt+']','[/'+tagName+']');break;case'q':if(!tagprompt||tagprompt.length==0){addtxt(event,'['+tagName+']','[/'+tagName+']');}else{addtxt(event,'['+tagName+'='+tagprompt+']','[/'+tagName+']');}
break;default:addtxt(event,'['+tagName+' name='+tagprompt+']','[/'+tagName+']');}}}
function addlist(event,listtype){var list_ar=[];var promptText='Enter List Item:';if(listtype=='ol'){var listtest='#';}else{var listtest='*';}
var tagprompt=prompt(promptText);while(tagprompt&&tagprompt.length!=0){var newline=listtest+' '+tagprompt+"\n";addtxt(event,newline,'');tagprompt=prompt(promptText);}}
function storeCaret(textEl){if(textEl.createTextRange)textEl.caretPos=document.selection.createRange().duplicate();}
function findparent(el,elType,parentNode){if(document.forms.length==1){return document.forms[0];}
if(el.parentNode&&el.parentNode.tagName!='undefined'){if(el.parentNode.tagName.toLowerCase()!=elType){return findparent(el.parentNode,elType);}}
return el.parentNode;}
(function(n){function o(e,g){var a=typeof e[g];return a==="function"||!!(a=="object"&&e[g])||a=="unknown"}function p(e,g,a){if(g<0)g+=e.value.length;if(typeof a=="undefined")a=g;if(a<0)a+=e.value.length;return{start:g,end:a}}function k(){return typeof document.body=="object"&&document.body?document.body:document.getElementsByTagName("body")[0]}var i,h,q,l,r,s,t,u,m;n(document).ready(function(){function e(a,b){return function(){var c=this.jquery?this[0]:this,d=c.nodeName.toLowerCase();if(c.nodeType==1&&(d=="textarea"||d=="input"&&c.type=="text")){c=[c].concat(Array.prototype.slice.call(arguments));c=a.apply(this,c);if(!b)return c}if(b)return this}}var g=document.createElement("textarea");k().appendChild(g);if(typeof g.selectionStart!="undefined"&&typeof g.selectionEnd!="undefined"){i=function(a){return{start:a.selectionStart,end:a.selectionEnd,length:a.selectionEnd-a.selectionStart,text:a.value.slice(a.selectionStart,a.selectionEnd)}};h=function(a,b,c){b=p(a,b,c);a.selectionStart=b.start;a.selectionEnd=b.end};m=function(a,b){if(b)a.selectionEnd=a.selectionStart;else a.selectionStart=a.selectionEnd}}else if(o(g,"createTextRange")&&typeof document.selection=="object"&&document.selection&&o(document.selection,"createRange")){i=function(a){var b=0,c=0,d,f,j;if((j=document.selection.createRange())&&j.parentElement()==a){f=a.value.length;d=a.value.replace(/\r\n/g,"\n");c=a.createTextRange();c.moveToBookmark(j.getBookmark());j=a.createTextRange();j.collapse(false);if(c.compareEndPoints("StartToEnd",j)>-1)b=c=f;else{b=-c.moveStart("character",-f);b+=d.slice(0,b).split("\n").length-1;if(c.compareEndPoints("EndToEnd",j)>-1)c=f;else{c=-c.moveEnd("character",-f);c+=d.slice(0,c).split("\n").length-1}}}return{start:b,end:c,length:c-b,text:a.value.slice(b,c)}};h=function(a,b,c){b=p(a,b,c);c=a.createTextRange();var d=b.start-(a.value.slice(0,b.start).split("\r\n").length-1);c.collapse(true);if(b.start==b.end)c.move("character",d);else{c.moveEnd("character",b.end-(a.value.slice(0,b.end).split("\r\n").length-
1));c.moveStart("character",d)}c.select()};m=function(a,b){var c=document.selection.createRange();c.collapse(b);c.select()}}else{k().removeChild(g);window.console&&window.console.log&&window.console.log("TextInputs module for Rangy not supported in your browser. Reason: No means of finding text input caret position");return}k().removeChild(g);l=function(a,b,c,d){var f;if(b!=c){f=a.value;a.value=f.slice(0,b)+f.slice(c)}d&&h(a,b,b)};q=function(a){var b=i(a);l(a,b.start,b.end,true)};u=function(a){var b=i(a),c;if(b.start!=b.end){c=a.value;a.value=c.slice(0,b.start)+c.slice(b.end)}h(a,b.start,b.start);return b.text};r=function(a,b,c,d){var f=a.value;a.value=f.slice(0,c)+b+f.slice(c);if(d){b=c+b.length;h(a,b,b)}};s=function(a,b){var c=i(a),d=a.value;a.value=d.slice(0,c.start)+b+d.slice(c.end);c=c.start+b.length;h(a,c,c)};t=function(a,b,c){var d=i(a),f=a.value;a.value=f.slice(0,d.start)+b+d.text+c+f.slice(d.end);b=d.start+b.length;h(a,b,b+d.length)};n.fn.extend({getSelection:e(i,false),setSelection:e(h,true),collapseSelection:e(m,true),deleteSelectedText:e(q,true),deleteText:e(l,true),extractSelectedText:e(u,false),insertText:e(r,true),replaceSelectedText:e(s,true),surroundSelectedText:e(t,true)})})})(jQuery);$(function(){$(document).on('focus',':input[name="body"],:input[name="message"]',function(){posttextareaid=$(this).attr('id');});$(document).on('click',function(e){if($(e.target).is('.smilies_list.dropdown-menu')||($(e.target).parents().is('.smilies_list.dropdown-menu')&&!$(e.target).is('img'))){$('.smilies_list.dropdown-menu').prev('.dropdown-toggle').dropdown('toggle');}}).on('click','.smilies_list .nav li a',function(e){if($(this).attr('href').match(/^#/)){e.preventDefault();var tab=$(this).attr('href').substr(1);$('li.active','.smilies_list .nav.nav-tabs').removeClass('active');$(this).closest('li').addClass('active');$('section','.smilies_list').addClass('hide');$('section.'+tab,'.smilies_list').removeClass('hide');if(tab=='community_badges'||tab=='controllers'){$('img','.smilies_list section.'+tab).each(function(){$(this).attr('src',$(this).data('src'));});}}});if(typeof $.fn.emojionePicker!='undefined'){$('.emojionepicker-picker').each(function(){var target=$(this).attr('data-target');$(target).emojionePicker();});}});!function($){"use strict";var toggle='[data-toggle=dropdown]',Dropdown=function(element){var $el=$(element).on('click.dropdown.data-api',this.toggle)
$('html').on('click.dropdown.data-api',function(){$el.parent().removeClass('open')})}
Dropdown.prototype={constructor:Dropdown,toggle:function(e){var $this=$(this),$parent,isActive
if($this.is('.disabled, :disabled'))return
$parent=getParent($this)
isActive=$parent.hasClass('open')
clearMenus()
if(!isActive){if('ontouchstart'in document.documentElement){$('<div class="dropdown-backdrop"/>').insertAfter($(this)).on('click',clearMenus)}
$parent.toggleClass('open')}
$this.focus()
return false},keydown:function(e){var $this,$items,$active,$parent,isActive,index
if(!/(38|40|27)/.test(e.keyCode))return
$this=$(this)
e.preventDefault()
e.stopPropagation()
if($this.is('.disabled, :disabled'))return
$parent=getParent($this)
isActive=$parent.hasClass('open')
if(!isActive||(isActive&&e.keyCode==27)){if(e.which==27)$parent.find(toggle).focus()
return $this.click()}
$items=$('[role=menu] li:not(.divider):visible a',$parent)
if(!$items.length)return
index=$items.index($items.filter(':focus'))
if(e.keyCode==38&&index>0)index--
if(e.keyCode==40&&index<$items.length-1)index++
if(!~index)index=0
$items.eq(index).focus()}}
function clearMenus(e){if(e!=undefined&&($(e.target).is('.dropdown-submenu')||$(e.target).parents().hasClass('dropdown-submenu'))){return;}
$('.dropdown-backdrop').remove()
$(toggle).each(function(){getParent($(this)).removeClass('open')})}
function getParent($this){var selector=$this.attr('data-target'),$parent
if(!selector){selector=$this.attr('href')
selector=selector&&/#/.test(selector)&&selector.replace(/.*(?=#[^\s]*$)/,'')}
if(selector&&selector!=='#'){$parent=$(selector)}
if(!$parent||!$parent.length)$parent=$this.parent()
return $parent}
var old=$.fn.dropdown
$.fn.dropdown=function(option){return this.each(function(){var $this=$(this),data=$this.data('dropdown')
if(!data)$this.data('dropdown',(data=new Dropdown(this)))
if(typeof option=='string')data[option].call($this)})}
$.fn.dropdown.Constructor=Dropdown
$.fn.dropdown.noConflict=function(){$.fn.dropdown=old
return this}
$(document).on('click.dropdown.data-api',clearMenus).on('click.dropdown.data-api','.dropdown form',function(e){e.stopPropagation()}).on('click.dropdown.data-api',toggle,Dropdown.prototype.toggle).on('keydown.dropdown.data-api',toggle+', [role=menu]',Dropdown.prototype.keydown)}(window.jQuery);!function($){"use strict";var Modal=function(element,options){this.options=options
this.$element=$(element).delegate('[data-dismiss="modal"]','click.dismiss.modal',$.proxy(this.hide,this))
this.options.remote&&this.$element.find('.modal-body').load(this.options.remote)}
Modal.prototype={constructor:Modal,toggle:function(){return this[!this.isShown?'show':'hide']()},show:function(){var that=this,e=$.Event('show')
this.$element.trigger(e)
if(this.isShown||e.isDefaultPrevented())return
this.isShown=true
this.escape()
this.backdrop(function(){var transition=$.support.transition&&that.$element.hasClass('fade')
if(!that.$element.parent().length){that.$element.appendTo(document.body)}
that.$element.show()
if(transition){that.$element[0].offsetWidth}
that.$element.addClass('in').attr('aria-hidden',false)
that.enforceFocus()
transition?that.$element.one($.support.transition.end,function(){that.$element.focus().trigger('shown')}):that.$element.focus().trigger('shown')})},hide:function(e){e&&e.preventDefault()
var that=this
e=$.Event('hide')
this.$element.trigger(e)
if(!this.isShown||e.isDefaultPrevented())return
this.isShown=false
this.escape()
$(document).off('focusin.modal')
this.$element.removeClass('in').attr('aria-hidden',true)
$.support.transition&&this.$element.hasClass('fade')?this.hideWithTransition():this.hideModal()},enforceFocus:function(){var that=this
$(document).on('focusin.modal',function(e){if(that.$element[0]!==e.target&&!that.$element.has(e.target).length){that.$element.focus()}})},escape:function(){var that=this
if(this.isShown&&this.options.keyboard){this.$element.on('keyup.dismiss.modal',function(e){e.which==27&&that.hide()})}else if(!this.isShown){this.$element.off('keyup.dismiss.modal')}},hideWithTransition:function(){var that=this,timeout=setTimeout(function(){that.$element.off($.support.transition.end)
that.hideModal()},500)
this.$element.one($.support.transition.end,function(){clearTimeout(timeout)
that.hideModal()})},hideModal:function(){var that=this
this.$element.hide()
this.backdrop(function(){that.removeBackdrop()
that.$element.trigger('hidden')})},removeBackdrop:function(){this.$backdrop&&this.$backdrop.remove()
this.$backdrop=null},backdrop:function(callback){var that=this,animate=this.$element.hasClass('fade')?'fade':''
if(this.isShown&&this.options.backdrop){var doAnimate=$.support.transition&&animate
this.$backdrop=$('<div class="modal-backdrop '+animate+'" />').appendTo(document.body)
this.$backdrop.click(this.options.backdrop=='static'?$.proxy(this.$element[0].focus,this.$element[0]):$.proxy(this.hide,this))
if(doAnimate)this.$backdrop[0].offsetWidth
this.$backdrop.addClass('in')
if(!callback)return
doAnimate?this.$backdrop.one($.support.transition.end,callback):callback()}else if(!this.isShown&&this.$backdrop){this.$backdrop.removeClass('in')
$.support.transition&&this.$element.hasClass('fade')?this.$backdrop.one($.support.transition.end,callback):callback()}else if(callback){callback()}}}
var old=$.fn.modal
$.fn.modal=function(option){return this.each(function(){var $this=$(this),data=$this.data('modal'),options=$.extend({},$.fn.modal.defaults,$this.data(),typeof option=='object'&&option)
if(!data)$this.data('modal',(data=new Modal(this,options)))
if(typeof option=='string')data[option]()
else if(options.show)data.show()})}
$.fn.modal.defaults={backdrop:true,keyboard:true,show:true}
$.fn.modal.Constructor=Modal
$.fn.modal.noConflict=function(){$.fn.modal=old
return this}
$(document).on('click.modal.data-api','[data-toggle="modal"]',function(e){var $this=$(this),href=$this.attr('href'),$target=$($this.attr('data-target')||(href&&href.replace(/.*(?=#[^\s]+$)/,''))),option=$target.data('modal')?'toggle':$.extend({remote:!/#/.test(href)&&href},$target.data(),$this.data())
e.preventDefault()
$target.modal(option).one('hide',function(){$this.focus()})})}(window.jQuery);!function($){"use strict";var Collapse=function(element,options){this.$element=$(element)
this.options=$.extend({},$.fn.collapse.defaults,options)
if(this.options.parent){this.$parent=$(this.options.parent)}
this.options.toggle&&this.toggle()}
Collapse.prototype={constructor:Collapse,dimension:function(){var hasWidth=this.$element.hasClass('width')
return hasWidth?'width':'height'},show:function(){var dimension,scroll,actives,hasData
if(this.transitioning||this.$element.hasClass('in'))return
dimension=this.dimension()
scroll=$.camelCase(['scroll',dimension].join('-'))
actives=this.$parent&&this.$parent.find('> .accordion-group > .in')
if(actives&&actives.length){hasData=actives.data('collapse')
if(hasData&&hasData.transitioning)return
actives.collapse('hide')
hasData||actives.data('collapse',null)}
this.$element[dimension](0)
this.transition('addClass',$.Event('show'),'shown')
$.support.transition&&this.$element[dimension](this.$element[0][scroll])},hide:function(){var dimension
if(this.transitioning||!this.$element.hasClass('in'))return
dimension=this.dimension()
this.reset(this.$element[dimension]())
this.transition('removeClass',$.Event('hide'),'hidden')
this.$element[dimension](0)},reset:function(size){var dimension=this.dimension()
this.$element.removeClass('collapse')
[dimension](size||'auto')
[0].offsetWidth
this.$element[size!==null?'addClass':'removeClass']('collapse')
return this},transition:function(method,startEvent,completeEvent){var that=this,complete=function(){if(startEvent.type=='show')that.reset()
that.transitioning=0
that.$element.trigger(completeEvent)}
this.$element.trigger(startEvent)
if(startEvent.isDefaultPrevented())return
this.transitioning=1
this.$element[method]('in')
$.support.transition&&this.$element.hasClass('collapse')?this.$element.one($.support.transition.end,complete):complete()},toggle:function(){this[this.$element.hasClass('in')?'hide':'show']()}}
var old=$.fn.collapse
$.fn.collapse=function(option){return this.each(function(){var $this=$(this),data=$this.data('collapse'),options=$.extend({},$.fn.collapse.defaults,$this.data(),typeof option=='object'&&option)
if(!data)$this.data('collapse',(data=new Collapse(this,options)))
if(typeof option=='string')data[option]()})}
$.fn.collapse.defaults={toggle:true}
$.fn.collapse.Constructor=Collapse
$.fn.collapse.noConflict=function(){$.fn.collapse=old
return this}
$(document).on('click.collapse.data-api','[data-toggle=collapse]',function(e){var $this=$(this),href,target=$this.attr('data-target')||e.preventDefault()||(href=$this.attr('href'))&&href.replace(/.*(?=#[^\s]+$)/,''),option=$(target).data('collapse')?'toggle':$this.data()
$this[$(target).hasClass('in')?'addClass':'removeClass']('collapsed')
$(target).collapse(option)})}(window.jQuery);;(function(f){"use strict";"function"===typeof define&&define.amd?define(["jquery"],f):"undefined"!==typeof module&&module.exports?module.exports=f(require("jquery")):f(jQuery)})(function($){"use strict";function n(a){return!a.nodeName||-1!==$.inArray(a.nodeName.toLowerCase(),["iframe","#document","html","body"])}function h(a){return $.isFunction(a)||$.isPlainObject(a)?a:{top:a,left:a}}var p=$.scrollTo=function(a,d,b){return $(window).scrollTo(a,d,b)};p.defaults={axis:"xy",duration:0,limit:!0};$.fn.scrollTo=function(a,d,b){"object"===typeof d&&(b=d,d=0);"function"===typeof b&&(b={onAfter:b});"max"===a&&(a=9E9);b=$.extend({},p.defaults,b);d=d||b.duration;var u=b.queue&&1<b.axis.length;u&&(d/=2);b.offset=h(b.offset);b.over=h(b.over);return this.each(function(){function k(a){var k=$.extend({},b,{queue:!0,duration:d,complete:a&&function(){a.call(q,e,b)}});r.animate(f,k)}if(null!==a){var l=n(this),q=l?this.contentWindow||window:this,r=$(q),e=a,f={},t;switch(typeof e){case"number":case"string":if(/^([+-]=?)?\d+(\.\d+)?(px|%)?$/.test(e)){e=h(e);break}e=l?$(e):$(e,q);case"object":if(e.length===0)return;if(e.is||e.style)t=(e=$(e)).offset()}var v=$.isFunction(b.offset)&&b.offset(q,e)||b.offset;$.each(b.axis.split(""),function(a,c){var d="x"===c?"Left":"Top",m=d.toLowerCase(),g="scroll"+d,h=r[g](),n=p.max(q,c);t?(f[g]=t[m]+(l?0:h-r.offset()[m]),b.margin&&(f[g]-=parseInt(e.css("margin"+d),10)||0,f[g]-=parseInt(e.css("border"+d+"Width"),10)||0),f[g]+=v[m]||0,b.over[m]&&(f[g]+=e["x"===c?"width":"height"]()*b.over[m])):(d=e[m],f[g]=d.slice&&"%"===d.slice(-1)?parseFloat(d)/100*n:d);b.limit&&/^\d+$/.test(f[g])&&(f[g]=0>=f[g]?0:Math.min(f[g],n));!a&&1<b.axis.length&&(h===f[g]?f={}:u&&(k(b.onAfterFirst),f={}))});k(b.onAfter)}})};p.max=function(a,d){var b="x"===d?"Width":"Height",h="scroll"+b;if(!n(a))return a[h]-$(a)[b.toLowerCase()]();var b="client"+b,k=a.ownerDocument||a.document,l=k.documentElement,k=k.body;return Math.max(l[h],k[h])-Math.min(l[b],k[b])};$.Tween.propHooks.scrollLeft=$.Tween.propHooks.scrollTop={get:function(a){return $(a.elem)[a.prop]()},set:function(a){var d=this.get(a);if(a.options.interrupt&&a._last&&a._last!==d)return $(a.elem).stop();var b=Math.round(a.now);d!==b&&($(a.elem)[a.prop](b),a._last=this.get(a))}};return p});var $p,pure=$p=function(e,k){var o=e,t=false;if(typeof o==="string")t=k||false;else if(o&&!o[0]&&!o.length)o=[o];return $p.core(o,t)};$p.core=function(e,k,o){function t(a){if(typeof console!=="undefined"){console.log(a);debugger}throw"pure error: "+a;}function O(){var a=$p.plugins,b=function(){};b.prototype=a;b.prototype.compile=a.compile||P;b.prototype.render=a.render||Q;b.prototype.autoRender=a.autoRender||R;b.prototype.find=a.find||S;b.prototype._compiler=B;b.prototype._error=t;return new b}function G(a){return a.outerHTML||function(b){var d=document.createElement("div");d.appendChild(b.cloneNode(true));return d.innerHTML}(a)}
function C(a,b){return function(d){return a(""+b.call(d.item||d.context,d))}}function S(a,b){if(typeof a==="string"){b=a;a=false}return typeof document.querySelectorAll!=="undefined"?(a||document).querySelectorAll(b):t("You can test PURE standalone with: iPhone, FF3.5+, Safari4+ and IE8+\n\nTo run PURE on your browser, you need a JS library/framework with a CSS selector engine")}function H(a,b){return function(d){for(var c=[a[0]],g=a.length,h,j,l,f,m=1;m<g;m++){h=b[m].call(this,d);j=a[m];if(h===""){l=c[c.length-1];if((f=l.search(/[^\s]+=\"?$/))>-1){c[c.length-1]=l.substring(0,f);j=j.substr(1)}}c[c.length]=h;c[c.length]=j}return c.join("")}}function T(a){var b=a.match(/^(\w+)\s*<-\s*(\S+)?$/);b===null&&t('bad loop spec: "'+a+'"');b[1]==="item"&&t('"item<-..." is a reserved word for the current running iteration.\n\nPlease choose another name for your loop.');if(!b[2]||b[2]&&/context/i.test(b[2]))b[2]=function(d){return d.context};return{name:b[1],sel:b[2]}}function y(a){if(typeof a==="function")return a;var b=a.match(/^[a-zA-Z\$_\@][\w\$:-]*(\.[\w\$:-]*[^\.])*$/);if(b===null){var d=false,c=a,g=[],h=[],j=0,l;if(/\'|\"/.test(c.charAt(0))){if(/\'|\"/.test(c.charAt(c.length-1))){l=c.substring(1,c.length-1);return function(){return l}}}else for(;(b=c.match(/#\{([^{}]+)\}/))!==null;){d=true;g[j++]=c.slice(0,b.index);h[j]=y(b[1]);c=c.slice(b.index+b[0].length,c.length)}if(!d)return function(){return a};g[j]=c;return H(g,h)}b=a.split(".");return function(f){var m=f.context||f,n=f[b[0]];f=0;if(n&&n.item){f+=1;if(b[f]==="pos")return n.pos;else m=n.item}for(n=b.length;f<n;f++){if(!m)break;m=m[b[f]]}return!m&&m!==0?"":m}}function D(a,b,d){var c,g,h,j,l,f=[];if(typeof b==="string"){c=b;(l=b.match(I))||t("bad selector syntax: "+b);g=l[1];h=l[2];j=l[3];l=l[4];if(h==="."||!h&&j)f[0]=a;else f=o.find(a,h);if(!f||f.length===0)return t('The node "'+b+'" was not found in the template:\n'+G(a).replace(/\t/g,"  "))}else{g=b.prepend;j=b.attr;l=b.append;f=[a]}if(g||l)if(g&&l)t("append/prepend cannot take place at the same time");else if(d)t("no append/prepend/replace modifiers allowed for loop target");else l&&d&&t("cannot append with loop (sel: "+c+")");var m,n,u,s,q;if(j){u=/^style$/i.test(j);q=(s=/^class$/i.test(j))?"className":j;m=function(i,r){i.setAttribute(J+j,r);if(q in i&&!u)try{i[q]=""}catch(p){}if(i.nodeType===1){i.removeAttribute(j);s&&i.removeAttribute(q)}};n=u||s?u?function(i){return i.style.cssText}:function(i){return i.className}:function(i){return i.getAttribute(j)};a=function(i){return i.replace(/\"/g,"&quot;")};g=g?function(i,r){m(i,r+n(i))}:l?function(i,r){m(i,n(i)+r)}:function(i,r){m(i,r)}}else{g=d?function(i,r){var p=i.parentNode;if(p){p.insertBefore(document.createTextNode(r),i.nextSibling);p.removeChild(i)}}:g?function(i,r){i.insertBefore(document.createTextNode(r),i.firstChild)}:l?function(i,r){i.appendChild(document.createTextNode(r))}:function(i,r){for(;i.firstChild;)i.removeChild(i.firstChild);i.appendChild(document.createTextNode(r))};a=function(i){return i}}return{attr:j,nodes:f,set:g,sel:c,quotefn:a}}
function E(a,b){for(var d=K+b+":",c=0;c<a.nodes.length;c++)a.set(a.nodes[c],d)}function L(a,b,d,c,g){return function(h){var j=b(h),l=h[a],f={items:j},m=0,n,u=[],s=function(i,r,p,x){var z=h.pos,v=h.item,U=h.items;h.pos=r.pos=i;h.item=r.item=j[i];h.items=j;typeof x!=="undefined"&&(h.length=x);if(typeof p==="function"&&p.call(h.item,h)===false)m++;else{u.push(d.call(h.item,h));h.pos=z;h.item=v;h.items=U}};h[a]=f;if(F(j)){n=j.length||0;typeof c==="function"&&j.sort(c);for(var q=0;q<n;q++)s(q,f,g,n-m)}else{j&&typeof c!=="undefined"&&t("sort is only available on arrays, not objects");for(n in j)j.hasOwnProperty(n)&&s(n,f,g)}typeof l!=="undefined"?h[a]=l:delete h[a];return u.join("")}}function M(a,b,d,c){var g=false,h,j,l,f;for(f in d)if(d.hasOwnProperty(f))if(f==="sort")j=d.sort;else if(f==="filter")l=d.filter;else{g&&t("cannot have more than one loop on a target");h=f;g=true}h||t("Error in the selector: "+b+"\nA directive action must be a string, a function or a loop(<-)");g=d[h];if(typeof g==="string"||typeof g==="function"){d={};d[h]={root:g};return M(a,b,d,c)}d=T(h);h=y(d.sel);a=D(a,b,true);b=a.nodes;for(w=0;w<b.length;w++){f=b[w];var m=B(f,g);c[c.length]=C(a.quotefn,L(d.name,h,m,j,l));a.nodes=[f];E(a,c.length-1)}return a}function V(a,b){function d(i,r){var p=i.match(I);p={prepend:!!p[1],prop:p[2],attr:p[3]||W[r],append:!!p[4],sel:i};var x,z,v;for(x=h.a.length-1;x>=0;x--){z=h.a[x];v=(v=z.l[0])&&v[p.prop];if(typeof v!=="undefined"){p.prop=z.p+"."+p.prop;if(h.l[p.prop]===true)v=v[0];break}}if(typeof v==="undefined"){v=y(p.prop)(F(b)?b[0]:b);if(v==="")return false}if(F(v)){h.a.push({l:v,p:p.prop});h.l[p.prop]=true;p.t="loop"}else p.t="str";return p}var c=a.getElementsByTagName("*"),g=[],h={a:[],l:{}},j,l,f,m,n,u,s,q;f=-1;for(m=c.length;f<m;f++){s=f>-1?c[f]:a;if(s.nodeType===1&&s.className!==""){q=s.className.split(" ");n=0;for(u=q.length;n<u;n++){j=q[n];j=d(j,s.tagName);if(j!==false){l=/nodevalue/i.test(j.attr);if(j.sel.indexOf("@")>-1||l){s.className=s.className.replace("@"+j.attr,"");if(l)j.attr=false}g.push({n:s,cspec:j})}}}}return g}function B(a,b,d,c){var g=[],h,j,l,f,m,n,u,s,q,i=[];c=c||d&&V(a,d);if(d)for(;c.length>0;){l=c[0].cspec;f=c[0].n;c.splice(0,1);if(l.t==="str"){f=D(f,l,false);E(f,g.length);g[g.length]=C(f.quotefn,y(l.prop))}else{n=y(l.sel);f=D(f,l,true);m=f.nodes;h=0;for(j=m.length;h<j;h++){u=m[h];s=B(u,false,d,c);g[g.length]=C(f.quotefn,L(l.sel,n,s));f.nodes=[u];E(f,g.length-1)}}}for(q in b)if(b.hasOwnProperty(q)){d=0;c=b[q];l=q.split(/\s*,\s*/);n=l.length;do if(typeof c==="function"||typeof c==="string"){q=l[d];f=D(a,q,false);E(f,g.length);g[g.length]=C(f.quotefn,y(c))}else M(a,q,c,g);while(++d<n)}a=G(a);a=a.replace(/<([^>]+)\s(value\=""|selected)\s?([^>]*)>/ig,"<$1 $3>");a=a.split(J).join("");a=a.split(K);for(d=1;d<a.length;d++){b=a[d];i[d]=g[parseInt(b,10)];a[d]=b.substring(b.indexOf(":")+1)}return H(a,i)}function P(a,b,d){var c=B((d||this[0]).cloneNode(true),a,b);return function(g){return c({context:g})}}function Q(a,b){for(var d=typeof b==="function"&&b,c=0,g=this.length;c<g;c++)this[c]=N(this[c],(d||o.compile(b,false,this[c]))(a,false));context=null;return this}function R(a,b){for(var d=o.compile(b,a,this[0]),c=0,g=this.length;c<g;c++)this[c]=N(this[c],d(a,false));context=null;return this}function N(a,b){var d,c=a.parentNode,g=0;if(!c){c=document.createElement("DIV");c.appendChild(a)}switch(a.tagName){case"TBODY":case"THEAD":case"TFOOT":b="<TABLE>"+b+"</TABLE>";g=1;break;case"TR":b="<TABLE><TBODY>"+b+"</TBODY></TABLE>";g=2;break;case"TD":case"TH":b="<TABLE><TBODY><TR>"+b+"</TR></TBODY></TABLE>";g=3;break}tmp=document.createElement("SPAN");tmp.style.display="none";document.body.appendChild(tmp);tmp.innerHTML=b;for(d=tmp.firstChild;g--;)d=d.firstChild;c.insertBefore(d,a);c.removeChild(a);document.body.removeChild(tmp);return a=d}var A=[];o=o||O();switch(typeof e){case"string":A=o.find(k||document,e);A.length===0&&t('The template "'+e+'" was not found');break;case"undefined":t("The root of the template is undefined, check your selector");break;default:A=e}var w=0;for(e=A.length;w<e;w++)o[w]=A[w];o.length=e;var K="_s"+Math.floor(Math.random()*1E6)+"_",J="_a"+Math.floor(Math.random()*1E6)+"_",I=/^(\+)?([^\@\+]+)?\@?([^\+]+)?(\+)?$/,W={IMG:"src",INPUT:"value"},F=Array.isArray?function(a){return Array.isArray(a)}:function(a){return Object.prototype.toString.call(a)==="[object Array]"};return o};$p.plugins={};$p.libs={dojo:function(){if(typeof document.querySelector==="undefined")$p.plugins.find=function(e,k){return dojo.query(k,e)}},domassistant:function(){if(typeof document.querySelector==="undefined")$p.plugins.find=function(e,k){return $(e).cssSelect(k)};DOMAssistant.attach({publicMethods:["compile","render","autoRender"],compile:function(e,k){return $p([this]).compile(e,k)},render:function(e,k){return $($p([this]).render(e,k))[0]},autoRender:function(e,k){return $($p([this]).autoRender(e,k))[0]}})},jquery:function(){if(typeof document.querySelector==="undefined")$p.plugins.find=function(e,k){return jQuery(e).find(k)};jQuery.fn.extend({directives:function(e){this._pure_d=e;return this},compile:function(e,k){return $p(this).compile(this._pure_d||e,k)},render:function(e,k){return jQuery($p(this).render(e,this._pure_d||k))},autoRender:function(e,k){return jQuery($p(this).autoRender(e,this._pure_d||k))}})},mootools:function(){if(typeof document.querySelector==="undefined")$p.plugins.find=function(e,k){return $(e).getElements(k)};Element.implement({compile:function(e,k){return $p(this).compile(e,k)},render:function(e,k){return $p([this]).render(e,k)},autoRender:function(e,k){return $p([this]).autoRender(e,k)}})},prototype:function(){if(typeof document.querySelector==="undefined")$p.plugins.find=function(e,k){e=e===document?e.body:e;return typeof e==="string"?$$(e):$(e).select(k)};Element.addMethods({compile:function(e,k,o){return $p([e]).compile(k,o)},render:function(e,k,o){return $p([e]).render(k,o)},autoRender:function(e,k,o){return $p([e]).autoRender(k,o)}})},sizzle:function(){if(typeof document.querySelector==="undefined")$p.plugins.find=function(e,k){return Sizzle(k,e)}},sly:function(){if(typeof document.querySelector==="undefined")$p.plugins.find=function(e,k){return Sly(k,e)}}};(function(){var e=typeof dojo!=="undefined"&&"dojo"||typeof DOMAssistant!=="undefined"&&"domassistant"||typeof jQuery!=="undefined"&&"jquery"||typeof MooTools!=="undefined"&&"mootools"||typeof Prototype!=="undefined"&&"prototype"||typeof Sizzle!=="undefined"&&"sizzle"||typeof Sly!=="undefined"&&"sly";e&&$p.libs[e]();if(typeof exports!=="undefined")exports.$p=$p})();(function($){$.fn.textareaAutoExpand=function(){return this.each(function(){var textarea=$(this);var height=textarea.height();var diff=parseInt(textarea.css('borderBottomWidth'))+parseInt(textarea.css('borderTopWidth'))+
parseInt(textarea.css('paddingBottom'))+parseInt(textarea.css('paddingTop'));var hasInitialValue=(this.value.replace(/\s/g,'').length>0);if(textarea.css('box-sizing')==='border-box'||textarea.css('-moz-box-sizing')==='border-box'||textarea.css('-webkit-box-sizing')==='border-box'){height=textarea.outerHeight();if(this.scrollHeight+diff==height)
diff=0;}else{diff=0;}
if(hasInitialValue){textarea.height(this.scrollHeight);}
textarea.on('scroll input keyup',function(event){if(event.keyCode==13&&!event.shiftKey){if(this.value.replace(/\s/g,'').length==0){event.stopImmediatePropagation();event.stopPropagation();}}
textarea.height(0);textarea.height(this.scrollHeight-diff);});});}})(jQuery);!function(a,b,c){!function(a){"use strict";"function"==typeof define&&define.amd?define(["jquery"],a):jQuery&&!jQuery.fn.qtip&&a(jQuery)}(function(d){"use strict";function e(a,b,c,e){this.id=c,this.target=a,this.tooltip=F,this.elements={target:a},this._id=S+"-"+c,this.timers={img:{}},this.options=b,this.plugins={},this.cache={event:{},target:d(),disabled:E,attr:e,onTooltip:E,lastClass:""},this.rendered=this.destroyed=this.disabled=this.waiting=this.hiddenDuringWait=this.positioning=this.triggering=E}function f(a){return a===F||"object"!==d.type(a)}function g(a){return!(d.isFunction(a)||a&&a.attr||a.length||"object"===d.type(a)&&(a.jquery||a.then))}function h(a){var b,c,e,h;return f(a)?E:(f(a.metadata)&&(a.metadata={type:a.metadata}),"content"in a&&(b=a.content,f(b)||b.jquery||b.done?(c=g(b)?E:b,b=a.content={text:c}):c=b.text,"ajax"in b&&(e=b.ajax,h=e&&e.once!==E,delete b.ajax,b.text=function(a,b){var f=c||d(this).attr(b.options.content.attr)||"Loading...",g=d.ajax(d.extend({},e,{context:b})).then(e.success,F,e.error).then(function(a){return a&&h&&b.set("content.text",a),a},function(a,c,d){b.destroyed||0===a.status||b.set("content.text",c+": "+d)});return h?f:(b.set("content.text",f),g)}),"title"in b&&(d.isPlainObject(b.title)&&(b.button=b.title.button,b.title=b.title.text),g(b.title||E)&&(b.title=E))),"position"in a&&f(a.position)&&(a.position={my:a.position,at:a.position}),"show"in a&&f(a.show)&&(a.show=a.show.jquery?{target:a.show}:a.show===D?{ready:D}:{event:a.show}),"hide"in a&&f(a.hide)&&(a.hide=a.hide.jquery?{target:a.hide}:{event:a.hide}),"style"in a&&f(a.style)&&(a.style={classes:a.style}),d.each(R,function(){this.sanitize&&this.sanitize(a)}),a)}function i(a,b){for(var c,d=0,e=a,f=b.split(".");e=e[f[d++]];)d<f.length&&(c=e);return[c||a,f.pop()]}function j(a,b){var c,d,e;for(c in this.checks)if(this.checks.hasOwnProperty(c))for(d in this.checks[c])this.checks[c].hasOwnProperty(d)&&(e=new RegExp(d,"i").exec(a))&&(b.push(e),("builtin"===c||this.plugins[c])&&this.checks[c][d].apply(this.plugins[c]||this,b))}function k(a){return V.concat("").join(a?"-"+a+" ":" ")}function l(a,b){return b>0?setTimeout(d.proxy(a,this),b):void a.call(this)}function m(a){this.tooltip.hasClass(aa)||(clearTimeout(this.timers.show),clearTimeout(this.timers.hide),this.timers.show=l.call(this,function(){this.toggle(D,a)},this.options.show.delay))}function n(a){if(!this.tooltip.hasClass(aa)&&!this.destroyed){var b=d(a.relatedTarget),c=b.closest(W)[0]===this.tooltip[0],e=b[0]===this.options.show.target[0];if(clearTimeout(this.timers.show),clearTimeout(this.timers.hide),this!==b[0]&&"mouse"===this.options.position.target&&c||this.options.hide.fixed&&/mouse(out|leave|move)/.test(a.type)&&(c||e))try{a.preventDefault(),a.stopImmediatePropagation()}catch(f){}else this.timers.hide=l.call(this,function(){this.toggle(E,a)},this.options.hide.delay,this)}}function o(a){!this.tooltip.hasClass(aa)&&this.options.hide.inactive&&(clearTimeout(this.timers.inactive),this.timers.inactive=l.call(this,function(){this.hide(a)},this.options.hide.inactive))}function p(a){this.rendered&&this.tooltip[0].offsetWidth>0&&this.reposition(a)}function q(a,c,e){d(b.body).delegate(a,(c.split?c:c.join("."+S+" "))+"."+S,function(){var a=y.api[d.attr(this,U)];a&&!a.disabled&&e.apply(a,arguments)})}function r(a,c,f){var g,i,j,k,l,m=d(b.body),n=a[0]===b?m:a,o=a.metadata?a.metadata(f.metadata):F,p="html5"===f.metadata.type&&o?o[f.metadata.name]:F,q=a.data(f.metadata.name||"qtipopts");try{q="string"==typeof q?d.parseJSON(q):q}catch(r){}if(k=d.extend(D,{},y.defaults,f,"object"==typeof q?h(q):F,h(p||o)),i=k.position,k.id=c,"boolean"==typeof k.content.text){if(j=a.attr(k.content.attr),k.content.attr===E||!j)return E;k.content.text=j}if(i.container.length||(i.container=m),i.target===E&&(i.target=n),k.show.target===E&&(k.show.target=n),k.show.solo===D&&(k.show.solo=i.container.closest("body")),k.hide.target===E&&(k.hide.target=n),k.position.viewport===D&&(k.position.viewport=i.container),i.container=i.container.eq(0),i.at=new A(i.at,D),i.my=new A(i.my),a.data(S))if(k.overwrite)a.qtip("destroy",!0);else if(k.overwrite===E)return E;return a.attr(T,c),k.suppress&&(l=a.attr("title"))&&a.removeAttr("title").attr(ca,l).attr("title",""),g=new e(a,k,c,!!j),a.data(S,g),g}function s(a){return a.charAt(0).toUpperCase()+a.slice(1)}function t(a,b){var d,e,f=b.charAt(0).toUpperCase()+b.slice(1),g=(b+" "+va.join(f+" ")+f).split(" "),h=0;if(ua[b])return a.css(ua[b]);for(;d=g[h++];)if((e=a.css(d))!==c)return ua[b]=d,e}function u(a,b){return Math.ceil(parseFloat(t(a,b)))}function v(a,b){this._ns="tip",this.options=b,this.offset=b.offset,this.size=[b.width,b.height],this.qtip=a,this.init(a)}function w(a,b){this.options=b,this._ns="-modal",this.qtip=a,this.init(a)}function x(a){this._ns="ie6",this.qtip=a,this.init(a)}var y,z,A,B,C,D=!0,E=!1,F=null,G="x",H="y",I="width",J="height",K="top",L="left",M="bottom",N="right",O="center",P="flipinvert",Q="shift",R={},S="qtip",T="data-hasqtip",U="data-qtip-id",V=["ui-widget","ui-tooltip"],W="."+S,X="click dblclick mousedown mouseup mousemove mouseleave mouseenter".split(" "),Y=S+"-fixed",Z=S+"-default",$=S+"-focus",_=S+"-hover",aa=S+"-disabled",ba="_replacedByqTip",ca="oldtitle",da={ie:function(){var a,c;for(a=4,c=b.createElement("div");(c.innerHTML="<!--[if gt IE "+a+"]><i></i><![endif]-->")&&c.getElementsByTagName("i")[0];a+=1);return a>4?a:NaN}(),iOS:parseFloat((""+(/CPU.*OS ([0-9_]{1,5})|(CPU like).*AppleWebKit.*Mobile/i.exec(navigator.userAgent)||[0,""])[1]).replace("undefined","3_2").replace("_",".").replace("_",""))||E};z=e.prototype,z._when=function(a){return d.when.apply(d,a)},z.render=function(a){if(this.rendered||this.destroyed)return this;var b=this,c=this.options,e=this.cache,f=this.elements,g=c.content.text,h=c.content.title,i=c.content.button,j=c.position,k=[];return d.attr(this.target[0],"aria-describedby",this._id),e.posClass=this._createPosClass((this.position={my:j.my,at:j.at}).my),this.tooltip=f.tooltip=d("<div/>",{id:this._id,"class":[S,Z,c.style.classes,e.posClass].join(" "),width:c.style.width||"",height:c.style.height||"",tracking:"mouse"===j.target&&j.adjust.mouse,role:"alert","aria-live":"polite","aria-atomic":E,"aria-describedby":this._id+"-content","aria-hidden":D}).toggleClass(aa,this.disabled).attr(U,this.id).data(S,this).appendTo(j.container).append(f.content=d("<div />",{"class":S+"-content",id:this._id+"-content","aria-atomic":D})),this.rendered=-1,this.positioning=D,h&&(this._createTitle(),d.isFunction(h)||k.push(this._updateTitle(h,E))),i&&this._createButton(),d.isFunction(g)||k.push(this._updateContent(g,E)),this.rendered=D,this._setWidget(),d.each(R,function(a){var c;"render"===this.initialize&&(c=this(b))&&(b.plugins[a]=c)}),this._unassignEvents(),this._assignEvents(),this._when(k).then(function(){b._trigger("render"),b.positioning=E,b.hiddenDuringWait||!c.show.ready&&!a||b.toggle(D,e.event,E),b.hiddenDuringWait=E}),y.api[this.id]=this,this},z.destroy=function(a){function b(){if(!this.destroyed){this.destroyed=D;var a,b=this.target,c=b.attr(ca);this.rendered&&this.tooltip.stop(1,0).find("*").remove().end().remove(),d.each(this.plugins,function(){this.destroy&&this.destroy()});for(a in this.timers)this.timers.hasOwnProperty(a)&&clearTimeout(this.timers[a]);b.removeData(S).removeAttr(U).removeAttr(T).removeAttr("aria-describedby"),this.options.suppress&&c&&b.attr("title",c).removeAttr(ca),this._unassignEvents(),this.options=this.elements=this.cache=this.timers=this.plugins=this.mouse=F,delete y.api[this.id]}}return this.destroyed?this.target:(a===D&&"hide"!==this.triggering||!this.rendered?b.call(this):(this.tooltip.one("tooltiphidden",d.proxy(b,this)),!this.triggering&&this.hide()),this.target)},B=z.checks={builtin:{"^id$":function(a,b,c,e){var f=c===D?y.nextid:c,g=S+"-"+f;f!==E&&f.length>0&&!d("#"+g).length?(this._id=g,this.rendered&&(this.tooltip[0].id=this._id,this.elements.content[0].id=this._id+"-content",this.elements.title[0].id=this._id+"-title")):a[b]=e},"^prerender":function(a,b,c){c&&!this.rendered&&this.render(this.options.show.ready)},"^content.text$":function(a,b,c){this._updateContent(c)},"^content.attr$":function(a,b,c,d){this.options.content.text===this.target.attr(d)&&this._updateContent(this.target.attr(c))},"^content.title$":function(a,b,c){return c?(c&&!this.elements.title&&this._createTitle(),void this._updateTitle(c)):this._removeTitle()},"^content.button$":function(a,b,c){this._updateButton(c)},"^content.title.(text|button)$":function(a,b,c){this.set("content."+b,c)},"^position.(my|at)$":function(a,b,c){"string"==typeof c&&(this.position[b]=a[b]=new A(c,"at"===b))},"^position.container$":function(a,b,c){this.rendered&&this.tooltip.appendTo(c)},"^show.ready$":function(a,b,c){c&&(!this.rendered&&this.render(D)||this.toggle(D))},"^style.classes$":function(a,b,c,d){this.rendered&&this.tooltip.removeClass(d).addClass(c)},"^style.(width|height)":function(a,b,c){this.rendered&&this.tooltip.css(b,c)},"^style.widget|content.title":function(){this.rendered&&this._setWidget()},"^style.def":function(a,b,c){this.rendered&&this.tooltip.toggleClass(Z,!!c)},"^events.(render|show|move|hide|focus|blur)$":function(a,b,c){this.rendered&&this.tooltip[(d.isFunction(c)?"":"un")+"bind"]("tooltip"+b,c)},"^(show|hide|position).(event|target|fixed|inactive|leave|distance|viewport|adjust)":function(){if(this.rendered){var a=this.options.position;this.tooltip.attr("tracking","mouse"===a.target&&a.adjust.mouse),this._unassignEvents(),this._assignEvents()}}}},z.get=function(a){if(this.destroyed)return this;var b=i(this.options,a.toLowerCase()),c=b[0][b[1]];return c.precedance?c.string():c};var ea=/^position\.(my|at|adjust|target|container|viewport)|style|content|show\.ready/i,fa=/^prerender|show\.ready/i;z.set=function(a,b){if(this.destroyed)return this;var c,e=this.rendered,f=E,g=this.options;return"string"==typeof a?(c=a,a={},a[c]=b):a=d.extend({},a),d.each(a,function(b,c){if(e&&fa.test(b))return void delete a[b];var h,j=i(g,b.toLowerCase());h=j[0][j[1]],j[0][j[1]]=c&&c.nodeType?d(c):c,f=ea.test(b)||f,a[b]=[j[0],j[1],c,h]}),h(g),this.positioning=D,d.each(a,d.proxy(j,this)),this.positioning=E,this.rendered&&this.tooltip[0].offsetWidth>0&&f&&this.reposition("mouse"===g.position.target?F:this.cache.event),this},z._update=function(a,b){var c=this,e=this.cache;return this.rendered&&a?(d.isFunction(a)&&(a=a.call(this.elements.target,e.event,this)||""),d.isFunction(a.then)?(e.waiting=D,a.then(function(a){return e.waiting=E,c._update(a,b)},F,function(a){return c._update(a,b)})):a===E||!a&&""!==a?E:(a.jquery&&a.length>0?b.empty().append(a.css({display:"block",visibility:"visible"})):b.html(a),this._waitForContent(b).then(function(a){c.rendered&&c.tooltip[0].offsetWidth>0&&c.reposition(e.event,!a.length)}))):E},z._waitForContent=function(a){var b=this.cache;return b.waiting=D,(d.fn.imagesLoaded?a.imagesLoaded():(new d.Deferred).resolve([])).done(function(){b.waiting=E}).promise()},z._updateContent=function(a,b){this._update(a,this.elements.content,b)},z._updateTitle=function(a,b){this._update(a,this.elements.title,b)===E&&this._removeTitle(E)},z._createTitle=function(){var a=this.elements,b=this._id+"-title";a.titlebar&&this._removeTitle(),a.titlebar=d("<div />",{"class":S+"-titlebar "+(this.options.style.widget?k("header"):"")}).append(a.title=d("<div />",{id:b,"class":S+"-title","aria-atomic":D})).insertBefore(a.content).delegate(".qtip-close","mousedown keydown mouseup keyup mouseout",function(a){d(this).toggleClass("ui-state-active ui-state-focus","down"===a.type.substr(-4))}).delegate(".qtip-close","mouseover mouseout",function(a){d(this).toggleClass("ui-state-hover","mouseover"===a.type)}),this.options.content.button&&this._createButton()},z._removeTitle=function(a){var b=this.elements;b.title&&(b.titlebar.remove(),b.titlebar=b.title=b.button=F,a!==E&&this.reposition())},z._createPosClass=function(a){return S+"-pos-"+(a||this.options.position.my).abbrev()},z.reposition=function(c,e){if(!this.rendered||this.positioning||this.destroyed)return this;this.positioning=D;var f,g,h,i,j=this.cache,k=this.tooltip,l=this.options.position,m=l.target,n=l.my,o=l.at,p=l.viewport,q=l.container,r=l.adjust,s=r.method.split(" "),t=k.outerWidth(E),u=k.outerHeight(E),v=0,w=0,x=k.css("position"),y={left:0,top:0},z=k[0].offsetWidth>0,A=c&&"scroll"===c.type,B=d(a),C=q[0].ownerDocument,F=this.mouse;if(d.isArray(m)&&2===m.length)o={x:L,y:K},y={left:m[0],top:m[1]};else if("mouse"===m)o={x:L,y:K},(!r.mouse||this.options.hide.distance)&&j.origin&&j.origin.pageX?c=j.origin:!c||c&&("resize"===c.type||"scroll"===c.type)?c=j.event:F&&F.pageX&&(c=F),"static"!==x&&(y=q.offset()),C.body.offsetWidth!==(a.innerWidth||C.documentElement.clientWidth)&&(g=d(b.body).offset()),y={left:c.pageX-y.left+(g&&g.left||0),top:c.pageY-y.top+(g&&g.top||0)},r.mouse&&A&&F&&(y.left-=(F.scrollX||0)-B.scrollLeft(),y.top-=(F.scrollY||0)-B.scrollTop());else{if("event"===m?c&&c.target&&"scroll"!==c.type&&"resize"!==c.type?j.target=d(c.target):c.target||(j.target=this.elements.target):"event"!==m&&(j.target=d(m.jquery?m:this.elements.target)),m=j.target,m=d(m).eq(0),0===m.length)return this;m[0]===b||m[0]===a?(v=da.iOS?a.innerWidth:m.width(),w=da.iOS?a.innerHeight:m.height(),m[0]===a&&(y={top:(p||m).scrollTop(),left:(p||m).scrollLeft()})):R.imagemap&&m.is("area")?f=R.imagemap(this,m,o,R.viewport?s:E):R.svg&&m&&m[0].ownerSVGElement?f=R.svg(this,m,o,R.viewport?s:E):(v=m.outerWidth(E),w=m.outerHeight(E),y=m.offset()),f&&(v=f.width,w=f.height,g=f.offset,y=f.position),y=this.reposition.offset(m,y,q),(da.iOS>3.1&&da.iOS<4.1||da.iOS>=4.3&&da.iOS<4.33||!da.iOS&&"fixed"===x)&&(y.left-=B.scrollLeft(),y.top-=B.scrollTop()),(!f||f&&f.adjustable!==E)&&(y.left+=o.x===N?v:o.x===O?v/2:0,y.top+=o.y===M?w:o.y===O?w/2:0)}return y.left+=r.x+(n.x===N?-t:n.x===O?-t/2:0),y.top+=r.y+(n.y===M?-u:n.y===O?-u/2:0),R.viewport?(h=y.adjusted=R.viewport(this,y,l,v,w,t,u),g&&h.left&&(y.left+=g.left),g&&h.top&&(y.top+=g.top),h.my&&(this.position.my=h.my)):y.adjusted={left:0,top:0},j.posClass!==(i=this._createPosClass(this.position.my))&&(j.posClass=i,k.removeClass(j.posClass).addClass(i)),this._trigger("move",[y,p.elem||p],c)?(delete y.adjusted,e===E||!z||isNaN(y.left)||isNaN(y.top)||"mouse"===m||!d.isFunction(l.effect)?k.css(y):d.isFunction(l.effect)&&(l.effect.call(k,this,d.extend({},y)),k.queue(function(a){d(this).css({opacity:"",height:""}),da.ie&&this.style.removeAttribute("filter"),a()})),this.positioning=E,this):this},z.reposition.offset=function(a,c,e){function f(a,b){c.left+=b*a.scrollLeft(),c.top+=b*a.scrollTop()}if(!e[0])return c;var g,h,i,j,k=d(a[0].ownerDocument),l=!!da.ie&&"CSS1Compat"!==b.compatMode,m=e[0];do"static"!==(h=d.css(m,"position"))&&("fixed"===h?(i=m.getBoundingClientRect(),f(k,-1)):(i=d(m).position(),i.left+=parseFloat(d.css(m,"borderLeftWidth"))||0,i.top+=parseFloat(d.css(m,"borderTopWidth"))||0),c.left-=i.left+(parseFloat(d.css(m,"marginLeft"))||0),c.top-=i.top+(parseFloat(d.css(m,"marginTop"))||0),g||"hidden"===(j=d.css(m,"overflow"))||"visible"===j||(g=d(m)));while(m=m.offsetParent);return g&&(g[0]!==k[0]||l)&&f(g,1),c};var ga=(A=z.reposition.Corner=function(a,b){a=(""+a).replace(/([A-Z])/," $1").replace(/middle/gi,O).toLowerCase(),this.x=(a.match(/left|right/i)||a.match(/center/)||["inherit"])[0].toLowerCase(),this.y=(a.match(/top|bottom|center/i)||["inherit"])[0].toLowerCase(),this.forceY=!!b;var c=a.charAt(0);this.precedance="t"===c||"b"===c?H:G}).prototype;ga.invert=function(a,b){this[a]=this[a]===L?N:this[a]===N?L:b||this[a]},ga.string=function(a){var b=this.x,c=this.y,d=b!==c?"center"===b||"center"!==c&&(this.precedance===H||this.forceY)?[c,b]:[b,c]:[b];return a!==!1?d.join(" "):d},ga.abbrev=function(){var a=this.string(!1);return a[0].charAt(0)+(a[1]&&a[1].charAt(0)||"")},ga.clone=function(){return new A(this.string(),this.forceY)},z.toggle=function(a,c){var e=this.cache,f=this.options,g=this.tooltip;if(c){if(/over|enter/.test(c.type)&&e.event&&/out|leave/.test(e.event.type)&&f.show.target.add(c.target).length===f.show.target.length&&g.has(c.relatedTarget).length)return this;e.event=d.event.fix(c)}if(this.waiting&&!a&&(this.hiddenDuringWait=D),!this.rendered)return a?this.render(1):this;if(this.destroyed||this.disabled)return this;var h,i,j,k=a?"show":"hide",l=this.options[k],m=this.options.position,n=this.options.content,o=this.tooltip.css("width"),p=this.tooltip.is(":visible"),q=a||1===l.target.length,r=!c||l.target.length<2||e.target[0]===c.target;return(typeof a).search("boolean|number")&&(a=!p),h=!g.is(":animated")&&p===a&&r,i=h?F:!!this._trigger(k,[90]),this.destroyed?this:(i!==E&&a&&this.focus(c),!i||h?this:(d.attr(g[0],"aria-hidden",!a),a?(this.mouse&&(e.origin=d.event.fix(this.mouse)),d.isFunction(n.text)&&this._updateContent(n.text,E),d.isFunction(n.title)&&this._updateTitle(n.title,E),!C&&"mouse"===m.target&&m.adjust.mouse&&(d(b).bind("mousemove."+S,this._storeMouse),C=D),o||g.css("width",g.outerWidth(E)),this.reposition(c,arguments[2]),o||g.css("width",""),l.solo&&("string"==typeof l.solo?d(l.solo):d(W,l.solo)).not(g).not(l.target).qtip("hide",new d.Event("tooltipsolo"))):(clearTimeout(this.timers.show),delete e.origin,C&&!d(W+'[tracking="true"]:visible',l.solo).not(g).length&&(d(b).unbind("mousemove."+S),C=E),this.blur(c)),j=d.proxy(function(){a?(da.ie&&g[0].style.removeAttribute("filter"),g.css("overflow",""),"string"==typeof l.autofocus&&d(this.options.show.autofocus,g).focus(),this.options.show.target.trigger("qtip-"+this.id+"-inactive")):g.css({display:"",visibility:"",opacity:"",left:"",top:""}),this._trigger(a?"visible":"hidden")},this),l.effect===E||q===E?(g[k](),j()):d.isFunction(l.effect)?(g.stop(1,1),l.effect.call(g,this),g.queue("fx",function(a){j(),a()})):g.fadeTo(90,a?1:0,j),a&&l.target.trigger("qtip-"+this.id+"-inactive"),this))},z.show=function(a){return this.toggle(D,a)},z.hide=function(a){return this.toggle(E,a)},z.focus=function(a){if(!this.rendered||this.destroyed)return this;var b=d(W),c=this.tooltip,e=parseInt(c[0].style.zIndex,10),f=y.zindex+b.length;return c.hasClass($)||this._trigger("focus",[f],a)&&(e!==f&&(b.each(function(){this.style.zIndex>e&&(this.style.zIndex=this.style.zIndex-1)}),b.filter("."+$).qtip("blur",a)),c.addClass($)[0].style.zIndex=f),this},z.blur=function(a){return!this.rendered||this.destroyed?this:(this.tooltip.removeClass($),this._trigger("blur",[this.tooltip.css("zIndex")],a),this)},z.disable=function(a){return this.destroyed?this:("toggle"===a?a=!(this.rendered?this.tooltip.hasClass(aa):this.disabled):"boolean"!=typeof a&&(a=D),this.rendered&&this.tooltip.toggleClass(aa,a).attr("aria-disabled",a),this.disabled=!!a,this)},z.enable=function(){return this.disable(E)},z._createButton=function(){var a=this,b=this.elements,c=b.tooltip,e=this.options.content.button,f="string"==typeof e,g=f?e:"Close tooltip";b.button&&b.button.remove(),e.jquery?b.button=e:b.button=d("<a />",{"class":"qtip-close "+(this.options.style.widget?"":S+"-icon"),title:g,"aria-label":g}).prepend(d("<span />",{"class":"ui-icon ui-icon-close",html:"&times;"})),b.button.appendTo(b.titlebar||c).attr("role","button").click(function(b){return c.hasClass(aa)||a.hide(b),E})},z._updateButton=function(a){if(!this.rendered)return E;var b=this.elements.button;a?this._createButton():b.remove()},z._setWidget=function(){var a=this.options.style.widget,b=this.elements,c=b.tooltip,d=c.hasClass(aa);c.removeClass(aa),aa=a?"ui-state-disabled":"qtip-disabled",c.toggleClass(aa,d),c.toggleClass("ui-helper-reset "+k(),a).toggleClass(Z,this.options.style.def&&!a),b.content&&b.content.toggleClass(k("content"),a),b.titlebar&&b.titlebar.toggleClass(k("header"),a),b.button&&b.button.toggleClass(S+"-icon",!a)},z._storeMouse=function(a){return(this.mouse=d.event.fix(a)).type="mousemove",this},z._bind=function(a,b,c,e,f){if(a&&c&&b.length){var g="."+this._id+(e?"-"+e:"");return d(a).bind((b.split?b:b.join(g+" "))+g,d.proxy(c,f||this)),this}},z._unbind=function(a,b){return a&&d(a).unbind("."+this._id+(b?"-"+b:"")),this},z._trigger=function(a,b,c){var e=new d.Event("tooltip"+a);return e.originalEvent=c&&d.extend({},c)||this.cache.event||F,this.triggering=a,this.tooltip.trigger(e,[this].concat(b||[])),this.triggering=E,!e.isDefaultPrevented()},z._bindEvents=function(a,b,c,e,f,g){var h=c.filter(e).add(e.filter(c)),i=[];h.length&&(d.each(b,function(b,c){var e=d.inArray(c,a);e>-1&&i.push(a.splice(e,1)[0])}),i.length&&(this._bind(h,i,function(a){var b=this.rendered?this.tooltip[0].offsetWidth>0:!1;(b?g:f).call(this,a)}),c=c.not(h),e=e.not(h))),this._bind(c,a,f),this._bind(e,b,g)},z._assignInitialEvents=function(a){function b(a){return this.disabled||this.destroyed?E:(this.cache.event=a&&d.event.fix(a),this.cache.target=a&&d(a.target),clearTimeout(this.timers.show),void(this.timers.show=l.call(this,function(){this.render("object"==typeof a||c.show.ready)},c.prerender?0:c.show.delay)))}var c=this.options,e=c.show.target,f=c.hide.target,g=c.show.event?d.trim(""+c.show.event).split(" "):[],h=c.hide.event?d.trim(""+c.hide.event).split(" "):[];this._bind(this.elements.target,["remove","removeqtip"],function(){this.destroy(!0)},"destroy"),/mouse(over|enter)/i.test(c.show.event)&&!/mouse(out|leave)/i.test(c.hide.event)&&h.push("mouseleave"),this._bind(e,"mousemove",function(a){this._storeMouse(a),this.cache.onTarget=D}),this._bindEvents(g,h,e,f,b,function(){return this.timers?void clearTimeout(this.timers.show):E}),(c.show.ready||c.prerender)&&b.call(this,a)},z._assignEvents=function(){var c=this,e=this.options,f=e.position,g=this.tooltip,h=e.show.target,i=e.hide.target,j=f.container,k=f.viewport,l=d(b),q=d(a),r=e.show.event?d.trim(""+e.show.event).split(" "):[],s=e.hide.event?d.trim(""+e.hide.event).split(" "):[];d.each(e.events,function(a,b){c._bind(g,"toggle"===a?["tooltipshow","tooltiphide"]:["tooltip"+a],b,null,g)}),/mouse(out|leave)/i.test(e.hide.event)&&"window"===e.hide.leave&&this._bind(l,["mouseout","blur"],function(a){/select|option/.test(a.target.nodeName)||a.relatedTarget||this.hide(a)}),e.hide.fixed?i=i.add(g.addClass(Y)):/mouse(over|enter)/i.test(e.show.event)&&this._bind(i,"mouseleave",function(){clearTimeout(this.timers.show)}),(""+e.hide.event).indexOf("unfocus")>-1&&this._bind(j.closest("html"),["mousedown","touchstart"],function(a){var b=d(a.target),c=this.rendered&&!this.tooltip.hasClass(aa)&&this.tooltip[0].offsetWidth>0,e=b.parents(W).filter(this.tooltip[0]).length>0;b[0]===this.target[0]||b[0]===this.tooltip[0]||e||this.target.has(b[0]).length||!c||this.hide(a)}),"number"==typeof e.hide.inactive&&(this._bind(h,"qtip-"+this.id+"-inactive",o,"inactive"),this._bind(i.add(g),y.inactiveEvents,o)),this._bindEvents(r,s,h,i,m,n),this._bind(h.add(g),"mousemove",function(a){if("number"==typeof e.hide.distance){var b=this.cache.origin||{},c=this.options.hide.distance,d=Math.abs;(d(a.pageX-b.pageX)>=c||d(a.pageY-b.pageY)>=c)&&this.hide(a)}this._storeMouse(a)}),"mouse"===f.target&&f.adjust.mouse&&(e.hide.event&&this._bind(h,["mouseenter","mouseleave"],function(a){return this.cache?void(this.cache.onTarget="mouseenter"===a.type):E}),this._bind(l,"mousemove",function(a){this.rendered&&this.cache.onTarget&&!this.tooltip.hasClass(aa)&&this.tooltip[0].offsetWidth>0&&this.reposition(a)})),(f.adjust.resize||k.length)&&this._bind(d.event.special.resize?k:q,"resize",p),f.adjust.scroll&&this._bind(q.add(f.container),"scroll",p)},z._unassignEvents=function(){var c=this.options,e=c.show.target,f=c.hide.target,g=d.grep([this.elements.target[0],this.rendered&&this.tooltip[0],c.position.container[0],c.position.viewport[0],c.position.container.closest("html")[0],a,b],function(a){return"object"==typeof a});e&&e.toArray&&(g=g.concat(e.toArray())),f&&f.toArray&&(g=g.concat(f.toArray())),this._unbind(g)._unbind(g,"destroy")._unbind(g,"inactive")},d(function(){q(W,["mouseenter","mouseleave"],function(a){var b="mouseenter"===a.type,c=d(a.currentTarget),e=d(a.relatedTarget||a.target),f=this.options;b?(this.focus(a),c.hasClass(Y)&&!c.hasClass(aa)&&clearTimeout(this.timers.hide)):"mouse"===f.position.target&&f.position.adjust.mouse&&f.hide.event&&f.show.target&&!e.closest(f.show.target[0]).length&&this.hide(a),c.toggleClass(_,b)}),q("["+U+"]",X,o)}),y=d.fn.qtip=function(a,b,e){var f=(""+a).toLowerCase(),g=F,i=d.makeArray(arguments).slice(1),j=i[i.length-1],k=this[0]?d.data(this[0],S):F;return!arguments.length&&k||"api"===f?k:"string"==typeof a?(this.each(function(){var a=d.data(this,S);if(!a)return D;if(j&&j.timeStamp&&(a.cache.event=j),!b||"option"!==f&&"options"!==f)a[f]&&a[f].apply(a,i);else{if(e===c&&!d.isPlainObject(b))return g=a.get(b),E;a.set(b,e)}}),g!==F?g:this):"object"!=typeof a&&arguments.length?void 0:(k=h(d.extend(D,{},a)),this.each(function(a){var b,c;return c=d.isArray(k.id)?k.id[a]:k.id,c=!c||c===E||c.length<1||y.api[c]?y.nextid++:c,b=r(d(this),c,k),b===E?D:(y.api[c]=b,d.each(R,function(){"initialize"===this.initialize&&this(b)}),void b._assignInitialEvents(j))}))},d.qtip=e,y.api={},d.each({attr:function(a,b){if(this.length){var c=this[0],e="title",f=d.data(c,"qtip");if(a===e&&f&&f.options&&"object"==typeof f&&"object"==typeof f.options&&f.options.suppress)return arguments.length<2?d.attr(c,ca):(f&&f.options.content.attr===e&&f.cache.attr&&f.set("content.text",b),this.attr(ca,b))}return d.fn["attr"+ba].apply(this,arguments)},clone:function(a){var b=d.fn["clone"+ba].apply(this,arguments);return a||b.filter("["+ca+"]").attr("title",function(){return d.attr(this,ca)}).removeAttr(ca),b}},function(a,b){if(!b||d.fn[a+ba])return D;var c=d.fn[a+ba]=d.fn[a];d.fn[a]=function(){return b.apply(this,arguments)||c.apply(this,arguments)}}),d.ui||(d["cleanData"+ba]=d.cleanData,d.cleanData=function(a){for(var b,c=0;(b=d(a[c])).length;c++)if(b.attr(T))try{b.triggerHandler("removeqtip")}catch(e){}d["cleanData"+ba].apply(this,arguments)}),y.version="3.0.3",y.nextid=0,y.inactiveEvents=X,y.zindex=15e3,y.defaults={prerender:E,id:E,overwrite:D,suppress:D,content:{text:D,attr:"title",title:E,button:E},position:{my:"top left",at:"bottom right",target:E,container:E,viewport:E,adjust:{x:0,y:0,mouse:D,scroll:D,resize:D,method:"flipinvert flipinvert"},effect:function(a,b){d(this).animate(b,{duration:200,queue:E})}},show:{target:E,event:"mouseenter",effect:D,delay:90,solo:E,ready:E,autofocus:E},hide:{target:E,event:"mouseleave",effect:D,delay:0,fixed:E,inactive:E,leave:"window",distance:E},style:{classes:"",widget:E,width:E,height:E,def:D},events:{render:F,move:F,show:F,hide:F,toggle:F,visible:F,hidden:F,focus:F,blur:F}};var ha,ia,ja,ka,la,ma="margin",na="border",oa="color",pa="background-color",qa="transparent",ra=" !important",sa=!!b.createElement("canvas").getContext,ta=/rgba?\(0, 0, 0(, 0)?\)|transparent|#123456/i,ua={},va=["Webkit","O","Moz","ms"];sa?(ka=a.devicePixelRatio||1,la=function(){var a=b.createElement("canvas").getContext("2d");return a.backingStorePixelRatio||a.webkitBackingStorePixelRatio||a.mozBackingStorePixelRatio||a.msBackingStorePixelRatio||a.oBackingStorePixelRatio||1}(),ja=ka/la):ia=function(a,b,c){return"<qtipvml:"+a+' xmlns="urn:schemas-microsoft.com:vml" class="qtip-vml" '+(b||"")+' style="behavior: url(#default#VML); '+(c||"")+'" />'},d.extend(v.prototype,{init:function(a){var b,c;c=this.element=a.elements.tip=d("<div />",{"class":S+"-tip"}).prependTo(a.tooltip),sa?(b=d("<canvas />").appendTo(this.element)[0].getContext("2d"),b.lineJoin="miter",b.miterLimit=1e5,b.save()):(b=ia("shape",'coordorigin="0,0"',"position:absolute;"),this.element.html(b+b),a._bind(d("*",c).add(c),["click","mousedown"],function(a){a.stopPropagation()},this._ns)),a._bind(a.tooltip,"tooltipmove",this.reposition,this._ns,this),this.create()},_swapDimensions:function(){this.size[0]=this.options.height,this.size[1]=this.options.width},_resetDimensions:function(){this.size[0]=this.options.width,this.size[1]=this.options.height},_useTitle:function(a){var b=this.qtip.elements.titlebar;return b&&(a.y===K||a.y===O&&this.element.position().top+this.size[1]/2+this.options.offset<b.outerHeight(D))},_parseCorner:function(a){var b=this.qtip.options.position.my;return a===E||b===E?a=E:a===D?a=new A(b.string()):a.string||(a=new A(a),a.fixed=D),a},_parseWidth:function(a,b,c){var d=this.qtip.elements,e=na+s(b)+"Width";return(c?u(c,e):u(d.content,e)||u(this._useTitle(a)&&d.titlebar||d.content,e)||u(d.tooltip,e))||0},_parseRadius:function(a){var b=this.qtip.elements,c=na+s(a.y)+s(a.x)+"Radius";return da.ie<9?0:u(this._useTitle(a)&&b.titlebar||b.content,c)||u(b.tooltip,c)||0},_invalidColour:function(a,b,c){var d=a.css(b);return!d||c&&d===a.css(c)||ta.test(d)?E:d},_parseColours:function(a){var b=this.qtip.elements,c=this.element.css("cssText",""),e=na+s(a[a.precedance])+s(oa),f=this._useTitle(a)&&b.titlebar||b.content,g=this._invalidColour,h=[];return h[0]=g(c,pa)||g(f,pa)||g(b.content,pa)||g(b.tooltip,pa)||c.css(pa),h[1]=g(c,e,oa)||g(f,e,oa)||g(b.content,e,oa)||g(b.tooltip,e,oa)||b.tooltip.css(e),d("*",c).add(c).css("cssText",pa+":"+qa+ra+";"+na+":0"+ra+";"),h},_calculateSize:function(a){var b,c,d,e=a.precedance===H,f=this.options.width,g=this.options.height,h="c"===a.abbrev(),i=(e?f:g)*(h?.5:1),j=Math.pow,k=Math.round,l=Math.sqrt(j(i,2)+j(g,2)),m=[this.border/i*l,this.border/g*l];return m[2]=Math.sqrt(j(m[0],2)-j(this.border,2)),m[3]=Math.sqrt(j(m[1],2)-j(this.border,2)),b=l+m[2]+m[3]+(h?0:m[0]),c=b/l,d=[k(c*f),k(c*g)],e?d:d.reverse()},_calculateTip:function(a,b,c){c=c||1,b=b||this.size;var d=b[0]*c,e=b[1]*c,f=Math.ceil(d/2),g=Math.ceil(e/2),h={br:[0,0,d,e,d,0],bl:[0,0,d,0,0,e],tr:[0,e,d,0,d,e],tl:[0,0,0,e,d,e],tc:[0,e,f,0,d,e],bc:[0,0,d,0,f,e],rc:[0,0,d,g,0,e],lc:[d,0,d,e,0,g]};return h.lt=h.br,h.rt=h.bl,h.lb=h.tr,h.rb=h.tl,h[a.abbrev()]},_drawCoords:function(a,b){a.beginPath(),a.moveTo(b[0],b[1]),a.lineTo(b[2],b[3]),a.lineTo(b[4],b[5]),a.closePath()},create:function(){var a=this.corner=(sa||da.ie)&&this._parseCorner(this.options.corner);return this.enabled=!!this.corner&&"c"!==this.corner.abbrev(),this.enabled&&(this.qtip.cache.corner=a.clone(),this.update()),this.element.toggle(this.enabled),this.corner},update:function(b,c){if(!this.enabled)return this;var e,f,g,h,i,j,k,l,m=this.qtip.elements,n=this.element,o=n.children(),p=this.options,q=this.size,r=p.mimic,s=Math.round;b||(b=this.qtip.cache.corner||this.corner),r===E?r=b:(r=new A(r),r.precedance=b.precedance,"inherit"===r.x?r.x=b.x:"inherit"===r.y?r.y=b.y:r.x===r.y&&(r[b.precedance]=b[b.precedance])),f=r.precedance,b.precedance===G?this._swapDimensions():this._resetDimensions(),e=this.color=this._parseColours(b),e[1]!==qa?(l=this.border=this._parseWidth(b,b[b.precedance]),p.border&&1>l&&!ta.test(e[1])&&(e[0]=e[1]),this.border=l=p.border!==D?p.border:l):this.border=l=0,k=this.size=this._calculateSize(b),n.css({width:k[0],height:k[1],lineHeight:k[1]+"px"}),j=b.precedance===H?[s(r.x===L?l:r.x===N?k[0]-q[0]-l:(k[0]-q[0])/2),s(r.y===K?k[1]-q[1]:0)]:[s(r.x===L?k[0]-q[0]:0),s(r.y===K?l:r.y===M?k[1]-q[1]-l:(k[1]-q[1])/2)],sa?(g=o[0].getContext("2d"),g.restore(),g.save(),g.clearRect(0,0,6e3,6e3),h=this._calculateTip(r,q,ja),i=this._calculateTip(r,this.size,ja),o.attr(I,k[0]*ja).attr(J,k[1]*ja),o.css(I,k[0]).css(J,k[1]),this._drawCoords(g,i),g.fillStyle=e[1],g.fill(),g.translate(j[0]*ja,j[1]*ja),this._drawCoords(g,h),g.fillStyle=e[0],g.fill()):(h=this._calculateTip(r),h="m"+h[0]+","+h[1]+" l"+h[2]+","+h[3]+" "+h[4]+","+h[5]+" xe",j[2]=l&&/^(r|b)/i.test(b.string())?8===da.ie?2:1:0,o.css({coordsize:k[0]+l+" "+k[1]+l,antialias:""+(r.string().indexOf(O)>-1),left:j[0]-j[2]*Number(f===G),top:j[1]-j[2]*Number(f===H),width:k[0]+l,height:k[1]+l}).each(function(a){var b=d(this);b[b.prop?"prop":"attr"]({coordsize:k[0]+l+" "+k[1]+l,path:h,fillcolor:e[0],filled:!!a,stroked:!a}).toggle(!(!l&&!a)),!a&&b.html(ia("stroke",'weight="'+2*l+'px" color="'+e[1]+'" miterlimit="1000" joinstyle="miter"'))})),a.opera&&setTimeout(function(){m.tip.css({display:"inline-block",visibility:"visible"})},1),c!==E&&this.calculate(b,k)},calculate:function(a,b){if(!this.enabled)return E;var c,e,f=this,g=this.qtip.elements,h=this.element,i=this.options.offset,j={};return a=a||this.corner,c=a.precedance,b=b||this._calculateSize(a),e=[a.x,a.y],c===G&&e.reverse(),d.each(e,function(d,e){var h,k,l;e===O?(h=c===H?L:K,j[h]="50%",j[ma+"-"+h]=-Math.round(b[c===H?0:1]/2)+i):(h=f._parseWidth(a,e,g.tooltip),k=f._parseWidth(a,e,g.content),l=f._parseRadius(a),j[e]=Math.max(-f.border,d?k:i+(l>h?l:-h)))}),j[a[c]]-=b[c===G?0:1],h.css({margin:"",top:"",bottom:"",left:"",right:""}).css(j),j},reposition:function(a,b,d){function e(a,b,c,d,e){a===Q&&j.precedance===b&&k[d]&&j[c]!==O?j.precedance=j.precedance===G?H:G:a!==Q&&k[d]&&(j[b]=j[b]===O?k[d]>0?d:e:j[b]===d?e:d)}function f(a,b,e){j[a]===O?p[ma+"-"+b]=o[a]=g[ma+"-"+b]-k[b]:(h=g[e]!==c?[k[b],-g[b]]:[-k[b],g[b]],(o[a]=Math.max(h[0],h[1]))>h[0]&&(d[b]-=k[b],o[b]=E),p[g[e]!==c?e:b]=o[a])}if(this.enabled){var g,h,i=b.cache,j=this.corner.clone(),k=d.adjusted,l=b.options.position.adjust.method.split(" "),m=l[0],n=l[1]||l[0],o={left:E,top:E,x:0,y:0},p={};this.corner.fixed!==D&&(e(m,G,H,L,N),e(n,H,G,K,M),j.string()===i.corner.string()&&i.cornerTop===k.top&&i.cornerLeft===k.left||this.update(j,E)),g=this.calculate(j),g.right!==c&&(g.left=-g.right),g.bottom!==c&&(g.top=-g.bottom),g.user=this.offset,o.left=m===Q&&!!k.left,o.left&&f(G,L,N),o.top=n===Q&&!!k.top,o.top&&f(H,K,M),this.element.css(p).toggle(!(o.x&&o.y||j.x===O&&o.y||j.y===O&&o.x)),d.left-=g.left.charAt?g.user:m!==Q||o.top||!o.left&&!o.top?g.left+this.border:0,d.top-=g.top.charAt?g.user:n!==Q||o.left||!o.left&&!o.top?g.top+this.border:0,i.cornerLeft=k.left,i.cornerTop=k.top,i.corner=j.clone()}},destroy:function(){this.qtip._unbind(this.qtip.tooltip,this._ns),this.qtip.elements.tip&&this.qtip.elements.tip.find("*").remove().end().remove()}}),ha=R.tip=function(a){return new v(a,a.options.style.tip)},ha.initialize="render",ha.sanitize=function(a){if(a.style&&"tip"in a.style){var b=a.style.tip;"object"!=typeof b&&(b=a.style.tip={corner:b}),/string|boolean/i.test(typeof b.corner)||(b.corner=D)}},B.tip={"^position.my|style.tip.(corner|mimic|border)$":function(){this.create(),this.qtip.reposition()},"^style.tip.(height|width)$":function(a){this.size=[a.width,a.height],this.update(),this.qtip.reposition()},"^content.title|style.(classes|widget)$":function(){this.update()}},d.extend(D,y.defaults,{style:{tip:{corner:D,mimic:E,width:6,height:6,border:D,offset:0}}});var wa,xa,ya="qtip-modal",za="."+ya;xa=function(){function a(a){if(d.expr[":"].focusable)return d.expr[":"].focusable;var b,c,e,f=!isNaN(d.attr(a,"tabindex")),g=a.nodeName&&a.nodeName.toLowerCase();return"area"===g?(b=a.parentNode,c=b.name,a.href&&c&&"map"===b.nodeName.toLowerCase()?(e=d("img[usemap=#"+c+"]")[0],!!e&&e.is(":visible")):!1):/input|select|textarea|button|object/.test(g)?!a.disabled:"a"===g?a.href||f:f}function c(a){j.length<1&&a.length?a.not("body").blur():j.first().focus()}function e(a){if(h.is(":visible")){var b,e=d(a.target),g=f.tooltip,i=e.closest(W);b=i.length<1?E:parseInt(i[0].style.zIndex,10)>parseInt(g[0].style.zIndex,10),b||e.closest(W)[0]===g[0]||c(e)}}var f,g,h,i=this,j={};d.extend(i,{init:function(){return h=i.elem=d("<div />",{id:"qtip-overlay",html:"<div></div>",mousedown:function(){return E}}).hide(),d(b.body).bind("focusin"+za,e),d(b).bind("keydown"+za,function(a){f&&f.options.show.modal.escape&&27===a.keyCode&&f.hide(a)}),h.bind("click"+za,function(a){f&&f.options.show.modal.blur&&f.hide(a)}),i},update:function(b){f=b,j=b.options.show.modal.stealfocus!==E?b.tooltip.find("*").filter(function(){return a(this)}):[]},toggle:function(a,e,j){var k=a.tooltip,l=a.options.show.modal,m=l.effect,n=e?"show":"hide",o=h.is(":visible"),p=d(za).filter(":visible:not(:animated)").not(k);return i.update(a),e&&l.stealfocus!==E&&c(d(":focus")),h.toggleClass("blurs",l.blur),e&&h.appendTo(b.body),h.is(":animated")&&o===e&&g!==E||!e&&p.length?i:(h.stop(D,E),d.isFunction(m)?m.call(h,e):m===E?h[n]():h.fadeTo(parseInt(j,10)||90,e?1:0,function(){e||h.hide()}),e||h.queue(function(a){h.css({left:"",top:""}),d(za).length||h.detach(),a()}),g=e,f.destroyed&&(f=F),i)}}),i.init()},xa=new xa,d.extend(w.prototype,{init:function(a){var b=a.tooltip;return this.options.on?(a.elements.overlay=xa.elem,b.addClass(ya).css("z-index",y.modal_zindex+d(za).length),a._bind(b,["tooltipshow","tooltiphide"],function(a,c,e){var f=a.originalEvent;if(a.target===b[0])if(f&&"tooltiphide"===a.type&&/mouse(leave|enter)/.test(f.type)&&d(f.relatedTarget).closest(xa.elem[0]).length)try{a.preventDefault()}catch(g){}else(!f||f&&"tooltipsolo"!==f.type)&&this.toggle(a,"tooltipshow"===a.type,e)},this._ns,this),a._bind(b,"tooltipfocus",function(a,c){if(!a.isDefaultPrevented()&&a.target===b[0]){var e=d(za),f=y.modal_zindex+e.length,g=parseInt(b[0].style.zIndex,10);xa.elem[0].style.zIndex=f-1,e.each(function(){this.style.zIndex>g&&(this.style.zIndex-=1)}),e.filter("."+$).qtip("blur",a.originalEvent),b.addClass($)[0].style.zIndex=f,xa.update(c);try{a.preventDefault()}catch(h){}}},this._ns,this),void a._bind(b,"tooltiphide",function(a){a.target===b[0]&&d(za).filter(":visible").not(b).last().qtip("focus",a)},this._ns,this)):this},toggle:function(a,b,c){return a&&a.isDefaultPrevented()?this:void xa.toggle(this.qtip,!!b,c)},destroy:function(){this.qtip.tooltip.removeClass(ya),this.qtip._unbind(this.qtip.tooltip,this._ns),xa.toggle(this.qtip,E),delete this.qtip.elements.overlay}}),wa=R.modal=function(a){return new w(a,a.options.show.modal)},wa.sanitize=function(a){a.show&&("object"!=typeof a.show.modal?a.show.modal={on:!!a.show.modal}:"undefined"==typeof a.show.modal.on&&(a.show.modal.on=D))},y.modal_zindex=y.zindex-200,wa.initialize="render",B.modal={"^show.modal.(on|blur)$":function(){this.destroy(),this.init(),this.qtip.elems.overlay.toggle(this.qtip.tooltip[0].offsetWidth>0)}},d.extend(D,y.defaults,{show:{modal:{on:E,effect:D,blur:D,stealfocus:D,escape:D}}}),R.viewport=function(c,d,e,f,g,h,i){function j(a,b,c,e,f,g,h,i,j){var k=d[f],s=u[a],t=v[a],w=c===Q,x=s===f?j:s===g?-j:-j/2,y=t===f?i:t===g?-i:-i/2,z=q[f]+r[f]-(n?0:m[f]),A=z-k,B=k+j-(h===I?o:p)-z,C=x-(u.precedance===a||s===u[b]?y:0)-(t===O?i/2:0);return w?(C=(s===f?1:-1)*x,d[f]+=A>0?A:B>0?-B:0,d[f]=Math.max(-m[f]+r[f],k-C,Math.min(Math.max(-m[f]+r[f]+(h===I?o:p),k+C),d[f],"center"===s?k-x:1e9))):(e*=c===P?2:0,A>0&&(s!==f||B>0)?(d[f]-=C+e,l.invert(a,f)):B>0&&(s!==g||A>0)&&(d[f]-=(s===O?-C:C)+e,l.invert(a,g)),d[f]<q[f]&&-d[f]>B&&(d[f]=k,l=u.clone())),d[f]-k}var k,l,m,n,o,p,q,r,s=e.target,t=c.elements.tooltip,u=e.my,v=e.at,w=e.adjust,x=w.method.split(" "),y=x[0],z=x[1]||x[0],A=e.viewport,B=e.container,C={left:0,top:0};return A.jquery&&s[0]!==a&&s[0]!==b.body&&"none"!==w.method?(m=B.offset()||C,n="static"===B.css("position"),k="fixed"===t.css("position"),o=A[0]===a?A.width():A.outerWidth(E),p=A[0]===a?A.height():A.outerHeight(E),q={left:k?0:A.scrollLeft(),top:k?0:A.scrollTop()},r=A.offset()||C,"shift"===y&&"shift"===z||(l=u.clone()),C={left:"none"!==y?j(G,H,y,w.x,L,N,I,f,h):0,top:"none"!==z?j(H,G,z,w.y,K,M,J,g,i):0,my:l}):C},R.polys={polygon:function(a,b){var c,d,e,f={width:0,height:0,position:{top:1e10,right:0,bottom:0,left:1e10},adjustable:E},g=0,h=[],i=1,j=1,k=0,l=0;for(g=a.length;g--;)c=[parseInt(a[--g],10),parseInt(a[g+1],10)],c[0]>f.position.right&&(f.position.right=c[0]),c[0]<f.position.left&&(f.position.left=c[0]),c[1]>f.position.bottom&&(f.position.bottom=c[1]),c[1]<f.position.top&&(f.position.top=c[1]),h.push(c);if(d=f.width=Math.abs(f.position.right-f.position.left),e=f.height=Math.abs(f.position.bottom-f.position.top),"c"===b.abbrev())f.position={left:f.position.left+f.width/2,top:f.position.top+f.height/2};else{for(;d>0&&e>0&&i>0&&j>0;)for(d=Math.floor(d/2),e=Math.floor(e/2),b.x===L?i=d:b.x===N?i=f.width-d:i+=Math.floor(d/2),b.y===K?j=e:b.y===M?j=f.height-e:j+=Math.floor(e/2),g=h.length;g--&&!(h.length<2);)k=h[g][0]-f.position.left,l=h[g][1]-f.position.top,(b.x===L&&k>=i||b.x===N&&i>=k||b.x===O&&(i>k||k>f.width-i)||b.y===K&&l>=j||b.y===M&&j>=l||b.y===O&&(j>l||l>f.height-j))&&h.splice(g,1);f.position={left:h[0][0],top:h[0][1]}}return f},rect:function(a,b,c,d){return{width:Math.abs(c-a),height:Math.abs(d-b),position:{left:Math.min(a,c),top:Math.min(b,d)}}},_angles:{tc:1.5,tr:7/4,tl:5/4,bc:.5,br:.25,bl:.75,rc:2,lc:1,c:0},ellipse:function(a,b,c,d,e){var f=R.polys._angles[e.abbrev()],g=0===f?0:c*Math.cos(f*Math.PI),h=d*Math.sin(f*Math.PI);return{width:2*c-Math.abs(g),height:2*d-Math.abs(h),position:{left:a+g,top:b+h},adjustable:E}},circle:function(a,b,c,d){return R.polys.ellipse(a,b,c,c,d)}},R.svg=function(a,c,e){for(var f,g,h,i,j,k,l,m,n,o=c[0],p=d(o.ownerSVGElement),q=o.ownerDocument,r=(parseInt(c.css("stroke-width"),10)||0)/2;!o.getBBox;)o=o.parentNode;if(!o.getBBox||!o.parentNode)return E;switch(o.nodeName){case"ellipse":case"circle":m=R.polys.ellipse(o.cx.baseVal.value,o.cy.baseVal.value,(o.rx||o.r).baseVal.value+r,(o.ry||o.r).baseVal.value+r,e);break;case"line":case"polygon":case"polyline":for(l=o.points||[{x:o.x1.baseVal.value,y:o.y1.baseVal.value},{x:o.x2.baseVal.value,y:o.y2.baseVal.value}],m=[],k=-1,i=l.numberOfItems||l.length;++k<i;)j=l.getItem?l.getItem(k):l[k],m.push.apply(m,[j.x,j.y]);m=R.polys.polygon(m,e);break;default:m=o.getBBox(),m={width:m.width,height:m.height,position:{left:m.x,top:m.y}}}return n=m.position,p=p[0],p.createSVGPoint&&(g=o.getScreenCTM(),l=p.createSVGPoint(),l.x=n.left,l.y=n.top,h=l.matrixTransform(g),n.left=h.x,n.top=h.y),q!==b&&"mouse"!==a.position.target&&(f=d((q.defaultView||q.parentWindow).frameElement).offset(),f&&(n.left+=f.left,n.top+=f.top)),q=d(q),n.left+=q.scrollLeft(),n.top+=q.scrollTop(),m},R.imagemap=function(a,b,c){b.jquery||(b=d(b));var e,f,g,h,i,j=(b.attr("shape")||"rect").toLowerCase().replace("poly","polygon"),k=d('img[usemap="#'+b.parent("map").attr("name")+'"]'),l=d.trim(b.attr("coords")),m=l.replace(/,$/,"").split(",");if(!k.length)return E;if("polygon"===j)h=R.polys.polygon(m,c);else{if(!R.polys[j])return E;for(g=-1,i=m.length,f=[];++g<i;)f.push(parseInt(m[g],10));h=R.polys[j].apply(this,f.concat(c))}return e=k.offset(),e.left+=Math.ceil((k.outerWidth(E)-k.width())/2),e.top+=Math.ceil((k.outerHeight(E)-k.height())/2),h.position.left+=e.left,h.position.top+=e.top,h};var Aa,Ba='<iframe class="qtip-bgiframe" frameborder="0" tabindex="-1" src="javascript:\'\';"  style="display:block; position:absolute; z-index:-1; filter:alpha(opacity=0); -ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=0)";"></iframe>';d.extend(x.prototype,{_scroll:function(){var b=this.qtip.elements.overlay;b&&(b[0].style.top=d(a).scrollTop()+"px")},init:function(c){var e=c.tooltip;d("select, object").length<1&&(this.bgiframe=c.elements.bgiframe=d(Ba).appendTo(e),c._bind(e,"tooltipmove",this.adjustBGIFrame,this._ns,this)),this.redrawContainer=d("<div/>",{id:S+"-rcontainer"}).appendTo(b.body),c.elements.overlay&&c.elements.overlay.addClass("qtipmodal-ie6fix")&&(c._bind(a,["scroll","resize"],this._scroll,this._ns,this),c._bind(e,["tooltipshow"],this._scroll,this._ns,this)),this.redraw()},adjustBGIFrame:function(){var a,b,c=this.qtip.tooltip,d={height:c.outerHeight(E),width:c.outerWidth(E)},e=this.qtip.plugins.tip,f=this.qtip.elements.tip;b=parseInt(c.css("borderLeftWidth"),10)||0,b={left:-b,top:-b},e&&f&&(a="x"===e.corner.precedance?[I,L]:[J,K],b[a[1]]-=f[a[0]]()),this.bgiframe.css(b).css(d)},redraw:function(){if(this.qtip.rendered<1||this.drawing)return this;var a,b,c,d,e=this.qtip.tooltip,f=this.qtip.options.style,g=this.qtip.options.position.container;return this.qtip.drawing=1,f.height&&e.css(J,f.height),f.width?e.css(I,f.width):(e.css(I,"").appendTo(this.redrawContainer),b=e.width(),1>b%2&&(b+=1),c=e.css("maxWidth")||"",d=e.css("minWidth")||"",a=(c+d).indexOf("%")>-1?g.width()/100:0,c=(c.indexOf("%")>-1?a:1*parseInt(c,10))||b,d=(d.indexOf("%")>-1?a:1*parseInt(d,10))||0,b=c+d?Math.min(Math.max(b,d),c):b,e.css(I,Math.round(b)).appendTo(g)),this.drawing=0,this},destroy:function(){this.bgiframe&&this.bgiframe.remove(),this.qtip._unbind([a,this.qtip.tooltip],this._ns)}}),Aa=R.ie6=function(a){return 6===da.ie?new x(a):E},Aa.initialize="render",B.ie6={"^content|style$":function(){this.redraw()}}})}(window,document);(function($){$.fn.hoverIntent=function(f,g){var cfg={sensitivity:7,interval:100,timeout:0};cfg=$.extend(cfg,g?{over:f,out:g}:f);var cX,cY,pX,pY;var track=function(ev){cX=ev.pageX;cY=ev.pageY;};var compare=function(ev,ob){ob.hoverIntent_t=clearTimeout(ob.hoverIntent_t);if((Math.abs(pX-cX)+Math.abs(pY-cY))<cfg.sensitivity){$(ob).unbind("mousemove",track);ob.hoverIntent_s=1;return cfg.over.apply(ob,[ev]);}else{pX=cX;pY=cY;ob.hoverIntent_t=setTimeout(function(){compare(ev,ob);},cfg.interval);}};var delay=function(ev,ob){ob.hoverIntent_t=clearTimeout(ob.hoverIntent_t);ob.hoverIntent_s=0;return cfg.out.apply(ob,[ev]);};var handleHover=function(e){var p=(e.type=="mouseover"?e.fromElement:e.toElement)||e.relatedTarget;while(p&&p!=this){try{p=p.parentNode;}catch(e){p=this;}}if(p==this){return false;}var ev=jQuery.extend({},e);var ob=this;if(ob.hoverIntent_t){ob.hoverIntent_t=clearTimeout(ob.hoverIntent_t);}if(e.type=="mouseover"){pX=ev.pageX;pY=ev.pageY;$(ob).bind("mousemove",track);if(ob.hoverIntent_s!=1){ob.hoverIntent_t=setTimeout(function(){compare(ev,ob);},cfg.interval);}}else{$(ob).unbind("mousemove",track);if(ob.hoverIntent_s==1){ob.hoverIntent_t=setTimeout(function(){delay(ev,ob);},cfg.timeout);}}};return this.mouseover(handleHover).mouseout(handleHover);};})(jQuery);(function(window,undefined){$.fn.scrollToFixed=function(parentEl,relEl,options){if(!options){options={};}
options=$.extend({'margin':5},options);var scrollEl=$(this);var scrollToFixed=function(){if(relEl&&relEl.height()>parentEl.height()){parentEl.css('minHeight',relEl.height()+'px');}
var parent={},docked={};var window_top=Math.ceil($(window).scrollTop());var window_left=Math.ceil($(window).scrollLeft());var window_height=Math.ceil($(window).innerHeight());var window_bottom=window_top+window_height;parent.top=Math.ceil(parentEl.offset().top);parent.left=Math.ceil(parentEl.offset().left);parent.width=Math.ceil(parentEl.width());parent.height=Math.ceil(parentEl.height());parent.bottom=parent.top+parent.height;docked.top=Math.ceil(scrollEl.offset().top);docked.height=Math.ceil(scrollEl.height());var cssPos=scrollEl.css('position');if(cssPos=='fixed'){docked.height-=20;}
docked.bottom=(scrollEl.css('position')=='fixed'?(parent.top+docked.height):(docked.top+docked.height));parent.left=(window_left>0)?parseInt(parent.left-window_left)+'px':'auto';parent.minheight=Math.ceil(parentEl.css('min-height').replace(/px/,''));if((parent.height-docked.height)<=15){scrollEl.css({position:"relative",top:'auto',bottom:'auto',left:'auto',width:''});return false;}
var visibility=window_bottom>docked.bottom;if(parent.minheight>100&&docked.height>parent.minheight){visibility=false;}
if(visibility&&(window_bottom-docked.height)<=parent.top){visibility=false;}
var bottom='auto',top='auto',if_dock;scrollEl.removeClass('docked');if(visibility){if(docked.height>window_height&&parent.height>docked.height){if(window_bottom>parent.bottom){bottom=(window_bottom-parent.bottom)+'px';}else{bottom=options.margin+'px';scrollEl.addClass('docked');}
if_dock=true;}else if(docked.height<window_height&&parent.height>docked.height){if(window_top>(parent.bottom-docked.height)){top=(parent.bottom-window_top-docked.height)+'px';if_dock=true;}else if(window_top>=parent.top){top='0px';scrollEl.addClass('docked');if_dock=true;}else{if_dock=false;}}else{if(window_top>parent.top){if((parent.bottom-window_top)<docked.height){bottom=(window_bottom-parent.bottom)+'px';}else{bottom=options.margin+'px';scrollEl.addClass('docked');}
if_dock=true;}else{if_dock=false;}}}else{if_dock=false;}
if(if_dock){scrollEl.css({position:"fixed",top:top,bottom:bottom,left:parent.left,width:parent.width+'px'});}else{scrollEl.css({position:"relative",top:'auto',bottom:'auto',left:'auto',width:''});}};$(window).bind("scroll",scrollToFixed).bind("keyup",function(e){if(e.keyCode==35||e.keyCode==36){scrollToFixed();}});};})(window);!function(f){f.fn.emojionePicker=function(a){var n,i="emojionepicker",l=f.extend({pickerTop:5,pickerRight:5,type:"shortcode"},a),e=this,t={neo:{header:'<img src="https://cdn.staticneo.com/neoassets/smileys/smile.gif" alt=":)">',selector:".smilies_list section.neo"},people:{header:":smiley:",content:":grinning: :smiley: :smile: :grin: :laughing: :sweat_smile: :joy: :rofl: :relaxed: :blush: :innocent: :slight_smile: :upside_down: :wink: :relieved: :zany_face: :star_struck: :heart_eyes: :kissing_heart: :kissing: :kissing_smiling_eyes: :kissing_closed_eyes: :yum: :stuck_out_tongue_winking_eye: :stuck_out_tongue_closed_eyes: :stuck_out_tongue: :money_mouth: :hugging: :nerd: :sunglasses: :cowboy: :smirk: :unamused: :disappointed: :pensive: :worried: :face_with_raised_eyebrow: :face_with_monocle: :confused: :slight_frown: :frowning2: :persevere: :confounded: :tired_face: :weary: :triumph: :angry: :rage: :face_with_symbols_over_mouth: :no_mouth: :neutral_face: :expressionless: :hushed: :frowning: :anguished: :open_mouth: :astonished: :dizzy_face: :exploding_head: :flushed: :scream: :fearful: :cold_sweat: :cry: :disappointed_relieved: :drooling_face: :sob: :sweat: :sleepy: :sleeping: :rolling_eyes: :thinking: :shushing_face: :face_with_hand_over_mouth: :lying_face: :grimacing: :zipper_mouth: :face_vomiting: :nauseated_face: :sneezing_face: :mask: :thermometer_face: :head_bandage: :smiling_imp: :imp: :japanese_ogre: :japanese_goblin: :poop: :ghost: :skull: :skull_crossbones: :alien: :space_invader: :robot: :jack_o_lantern: :clown: :smiley_cat: :smile_cat: :joy_cat: :heart_eyes_cat: :smirk_cat: :kissing_cat: :scream_cat: :crying_cat_face: :pouting_cat: :open_hands: :raised_hands: :palms_up_together: :clap: :pray: :handshake: :thumbsup: :thumbsdown: :punch: :fist: :left_facing_fist: :right_facing_fist: :fingers_crossed: :v: :metal: :love_you_gesture: :ok_hand: :point_left: :point_right: :point_up_2: :point_down: :point_up: :raised_hand: :raised_back_of_hand: :hand_splayed: :vulcan: :wave: :call_me: :muscle: :middle_finger: :writing_hand: :selfie: :nail_care: :ring: :lipstick: :kiss: :lips: :tongue: :ear: :nose: :footprints: :eye: :eyes: :speaking_head: :bust_in_silhouette: :busts_in_silhouette: :baby: :boy: :girl: :man: :woman: :blond-haired_woman: :blond-haired_man: :older_man: :older_woman: :man_with_chinese_cap: :woman_wearing_turban: :man_wearing_turban: :woman_police_officer: :police_officer: :woman_construction_worker: :construction_worker: :woman_guard: :guard: :woman_detective: :detective: :woman_health_worker: :man_health_worker: :woman_farmer: :man_farmer: :woman_cook: :man_cook: :woman_student: :man_student: :woman_singer: :man_singer: :woman_teacher: :man_teacher: :woman_factory_worker: :man_factory_worker: :woman_technologist: :man_technologist: :woman_office_worker: :man_office_worker: :woman_mechanic: :man_mechanic: :woman_scientist: :man_scientist: :woman_artist: :man_artist: :woman_firefighter: :man_firefighter: :woman_pilot: :man_pilot: :woman_astronaut: :man_astronaut: :woman_judge: :man_judge: :mrs_claus: :santa: :princess: :prince: :bride_with_veil: :man_in_tuxedo: :angel: :pregnant_woman: :breast_feeding: :woman_bowing: :man_bowing: :woman_tipping_hand: :man_tipping_hand: :woman_gesturing_no: :man_gesturing_no: :woman_gesturing_ok: :man_gesturing_ok: :woman_raising_hand: :man_raising_hand: :woman_facepalming: :man_facepalming: :woman_shrugging: :man_shrugging: :woman_pouting: :man_pouting: :woman_frowning: :man_frowning: :woman_getting_haircut: :man_getting_haircut: :woman_getting_face_massage: :man_getting_face_massage: :man_in_business_suit_levitating: :dancer: :man_dancing: :women_with_bunny_ears_partying: :men_with_bunny_ears_partying: :woman_walking: :man_walking: :woman_running: :man_running: :couple: :two_women_holding_hands: :two_men_holding_hands: :couple_with_heart: :couple_ww: :couple_mm: :couplekiss: :kiss_ww: :kiss_mm: :family: :family_mwg: :family_mwgb: :family_mwbb: :family_mwgg: :family_wwb: :family_wwg: :family_wwgb: :family_wwbb: :family_wwgg: :family_mmb: :family_mmg: :family_mmgb: :family_mmbb: :family_mmgg: :family_woman_boy: :family_woman_girl: :family_woman_girl_boy: :family_woman_boy_boy: :family_woman_girl_girl: :family_man_boy: :family_man_girl: :family_man_girl_boy: :family_man_boy_boy: :family_man_girl_girl: :bearded_person: :woman_with_headscarf: :woman_mage: :man_mage: :woman_fairy: :man_fairy: :woman_vampire: :man_vampire: :mermaid: :merman: :woman_elf: :man_elf: :woman_genie: :man_genie: :woman_zombie: :man_zombie: :womans_clothes: :shirt: :jeans: :necktie: :dress: :bikini: :kimono: :high_heel: :sandal: :boot: :mans_shoe: :athletic_shoe: :womans_hat: :tophat: :mortar_board: :crown: :helmet_with_cross: :school_satchel: :pouch: :purse: :handbag: :briefcase: :eyeglasses: :dark_sunglasses: :closed_umbrella: :umbrella2: :brain: :billed_cap: :scarf: :gloves: :coat: :socks:".split(" ")},nature:{header:":bear:",content:":dog: :cat: :mouse: :hamster: :rabbit: :fox: :bear: :panda_face: :koala: :tiger: :lion_face: :cow: :pig: :pig_nose: :frog: :monkey_face: :see_no_evil: :hear_no_evil: :speak_no_evil: :monkey: :chicken: :penguin: :bird: :baby_chick: :hatching_chick: :hatched_chick: :duck: :eagle: :owl: :bat: :wolf: :boar: :horse: :unicorn: :bee: :bug: :butterfly: :snail: :shell: :beetle: :ant: :spider: :spider_web: :turtle: :snake: :lizard: :scorpion: :crab: :squid: :octopus: :shrimp: :tropical_fish: :fish: :blowfish: :dolphin: :shark: :whale: :whale2: :crocodile: :leopard: :tiger2: :water_buffalo: :ox: :cow2: :deer: :dromedary_camel: :camel: :elephant: :rhino: :gorilla: :racehorse: :pig2: :goat: :ram: :sheep: :dog2: :poodle: :cat2: :rooster: :turkey: :dove: :rabbit2: :mouse2: :rat: :chipmunk: :dragon: :giraffe: :zebra: :hedgehog: :sauropod: :t_rex: :cricket: :dragon_face: :feet: :cactus: :christmas_tree: :evergreen_tree: :deciduous_tree: :palm_tree: :seedling: :herb: :shamrock: :four_leaf_clover: :bamboo: :tanabata_tree: :leaves: :fallen_leaf: :maple_leaf: :mushroom: :ear_of_rice: :bouquet: :tulip: :rose: :wilted_rose: :sunflower: :blossom: :cherry_blossom: :hibiscus: :earth_americas: :earth_africa: :earth_asia: :full_moon: :waning_gibbous_moon: :last_quarter_moon: :waning_crescent_moon: :new_moon: :waxing_crescent_moon: :first_quarter_moon: :waxing_gibbous_moon: :new_moon_with_face: :full_moon_with_face: :sun_with_face: :first_quarter_moon_with_face: :last_quarter_moon_with_face: :crescent_moon: :dizzy: :star: :star2: :sparkles: :zap: :fire: :boom: :comet: :sunny: :white_sun_small_cloud: :partly_sunny: :white_sun_cloud: :white_sun_rain_cloud: :rainbow: :cloud: :cloud_rain: :thunder_cloud_rain: :cloud_lightning: :cloud_snow: :snowman2: :snowman: :snowflake: :wind_blowing_face: :dash: :cloud_tornado: :fog: :ocean: :droplet: :sweat_drops: :umbrella:".split(" ")},food:{header:":hamburger:",content:":green_apple: :apple: :pear: :tangerine: :lemon: :banana: :watermelon: :grapes: :strawberry: :melon: :cherries: :peach: :pineapple: :kiwi: :avocado: :tomato: :eggplant: :cucumber: :carrot: :corn: :hot_pepper: :potato: :sweet_potato: :chestnut: :peanuts: :honey_pot: :croissant: :bread: :french_bread: :cheese: :egg: :cooking: :bacon: :pancakes: :fried_shrimp: :poultry_leg: :meat_on_bone: :pizza: :hotdog: :hamburger: :fries: :stuffed_flatbread: :taco: :burrito: :salad: :shallow_pan_of_food: :spaghetti: :ramen: :stew: :fish_cake: :sushi: :bento: :curry: :rice_ball: :rice: :rice_cracker: :oden: :dango: :shaved_ice: :ice_cream: :icecream: :cake: :birthday: :custard: :lollipop: :candy: :chocolate_bar: :popcorn: :doughnut: :cookie: :milk: :baby_bottle: :coffee: :tea: :sake: :beer: :beers: :champagne_glass: :wine_glass: :tumbler_glass: :cocktail: :tropical_drink: :champagne: :spoon: :fork_and_knife: :fork_knife_plate: :dumpling: :fortune_cookie: :takeout_box: :chopsticks: :bowl_with_spoon: :cup_with_straw: :coconut: :broccoli: :pie: :pretzel: :cut_of_meat: :sandwich: :canned_food:".split(" ")},activity:{header:":basketball:",content:":soccer: :basketball: :football: :baseball: :tennis: :volleyball: :rugby_football: :8ball: :ping_pong: :badminton: :goal: :hockey: :field_hockey: :cricket_game: :golf: :bow_and_arrow: :fishing_pole_and_fish: :boxing_glove: :martial_arts_uniform: :ice_skate: :ski: :skier: :snowboarder: :woman_lifting_weights: :man_lifting_weights: :person_fencing: :women_wrestling: :men_wrestling: :woman_cartwheeling: :man_cartwheeling: :woman_bouncing_ball: :man_bouncing_ball: :woman_playing_handball: :man_playing_handball: :woman_golfing: :man_golfing: :woman_surfing: :man_surfing: :woman_swimming: :man_swimming: :woman_playing_water_polo: :man_playing_water_polo: :woman_rowing_boat: :man_rowing_boat: :horse_racing: :woman_biking: :man_biking: :woman_mountain_biking: :man_mountain_biking: :woman_in_steamy_room: :man_in_steamy_room: :woman_climbing: :man_climbing: :woman_in_lotus_position: :man_in_lotus_position: :running_shirt_with_sash: :medal: :military_medal: :first_place: :second_place: :third_place: :trophy: :rosette: :reminder_ribbon: :ticket: :tickets: :circus_tent: :woman_juggling: :man_juggling: :performing_arts: :art: :clapper: :microphone: :headphones: :musical_score: :musical_keyboard: :drum: :saxophone: :trumpet: :guitar: :violin: :game_die: :dart: :bowling: :video_game: :slot_machine: :sled: :curling_stone:".split(" ")},travel:{header:":red_car:",content:":red_car: :taxi: :blue_car: :bus: :trolleybus: :race_car: :police_car: :ambulance: :fire_engine: :minibus: :truck: :articulated_lorry: :tractor: :scooter: :bike: :motor_scooter: :motorcycle: :rotating_light: :oncoming_police_car: :oncoming_bus: :oncoming_automobile: :oncoming_taxi: :aerial_tramway: :mountain_cableway: :suspension_railway: :railway_car: :train: :mountain_railway: :monorail: :bullettrain_side: :bullettrain_front: :light_rail: :steam_locomotive: :train2: :metro: :tram: :station: :helicopter: :airplane_small: :airplane: :airplane_departure: :airplane_arriving: :rocket: :satellite_orbital: :seat: :canoe: :sailboat: :motorboat: :speedboat: :cruise_ship: :ferry: :ship: :anchor: :construction: :fuelpump: :busstop: :vertical_traffic_light: :traffic_light: :map: :moyai: :statue_of_liberty: :fountain: :tokyo_tower: :european_castle: :japanese_castle: :stadium: :ferris_wheel: :roller_coaster: :carousel_horse: :beach_umbrella: :beach: :island: :mountain: :mountain_snow: :mount_fuji: :volcano: :desert: :camping: :tent: :railway_track: :motorway: :construction_site: :factory: :house: :house_with_garden: :homes: :house_abandoned: :office: :department_store: :post_office: :european_post_office: :hospital: :bank: :hotel: :convenience_store: :school: :love_hotel: :wedding: :classical_building: :church: :mosque: :synagogue: :kaaba: :shinto_shrine: :japan: :rice_scene: :park: :sunrise: :sunrise_over_mountains: :stars: :sparkler: :fireworks: :city_sunset: :city_dusk: :cityscape: :night_with_stars: :milky_way: :bridge_at_night: :foggy: :flying_saucer:".split(" ")},objects:{header:":bulb:",content:":watch: :iphone: :calling: :computer: :keyboard: :desktop: :printer: :mouse_three_button: :trackball: :joystick: :compression: :minidisc: :floppy_disk: :cd: :dvd: :vhs: :camera: :camera_with_flash: :video_camera: :movie_camera: :projector: :film_frames: :telephone_receiver: :telephone: :pager: :fax: :tv: :radio: :microphone2: :level_slider: :control_knobs: :stopwatch: :timer: :alarm_clock: :clock: :hourglass: :hourglass_flowing_sand: :satellite: :battery: :electric_plug: :bulb: :flashlight: :candle: :wastebasket: :oil: :money_with_wings: :dollar: :yen: :euro: :pound: :moneybag: :credit_card: :gem: :scales: :wrench: :hammer: :hammer_pick: :tools: :pick: :nut_and_bolt: :gear: :chains: :gun: :bomb: :knife: :dagger: :crossed_swords: :shield: :smoking: :coffin: :urn: :amphora: :crystal_ball: :prayer_beads: :barber: :alembic: :telescope: :microscope: :hole: :pill: :syringe: :thermometer: :toilet: :potable_water: :shower: :bathtub: :bath: :bellhop: :key: :key2: :door: :couch: :bed: :sleeping_accommodation: :frame_photo: :shopping_bags: :shopping_cart: :gift: :balloon: :flags: :ribbon: :confetti_ball: :tada: :dolls: :izakaya_lantern: :wind_chime: :envelope: :envelope_with_arrow: :incoming_envelope: :e-mail: :love_letter: :inbox_tray: :outbox_tray: :package: :label: :mailbox_closed: :mailbox: :mailbox_with_mail: :mailbox_with_no_mail: :postbox: :postal_horn: :scroll: :page_with_curl: :page_facing_up: :bookmark_tabs: :bar_chart: :chart_with_upwards_trend: :chart_with_downwards_trend: :notepad_spiral: :calendar_spiral: :calendar: :date: :card_index: :card_box: :ballot_box: :file_cabinet: :clipboard: :file_folder: :open_file_folder: :dividers: :newspaper2: :newspaper: :notebook: :notebook_with_decorative_cover: :ledger: :closed_book: :green_book: :blue_book: :orange_book: :books: :book: :bookmark: :link: :paperclip: :paperclips: :triangular_ruler: :straight_ruler: :pushpin: :round_pushpin: :scissors: :pen_ballpoint: :pen_fountain: :black_nib: :paintbrush: :crayon: :pencil: :pencil2: :mag: :mag_right: :lock_with_ink_pen: :closed_lock_with_key: :lock: :unlock:".split(" ")},symbols:{header:":hash:",content:":heart: :orange_heart: :yellow_heart: :green_heart: :blue_heart: :purple_heart: :black_heart: :broken_heart: :heart_exclamation: :two_hearts: :revolving_hearts: :heartbeat: :heartpulse: :sparkling_heart: :cupid: :gift_heart: :heart_decoration: :peace: :cross: :star_and_crescent: :om_symbol: :wheel_of_dharma: :star_of_david: :six_pointed_star: :menorah: :yin_yang: :orthodox_cross: :place_of_worship: :ophiuchus: :aries: :taurus: :gemini: :cancer: :leo: :virgo: :libra: :scorpius: :sagittarius: :capricorn: :aquarius: :pisces: :id: :atom: :accept: :radioactive: :biohazard: :mobile_phone_off: :vibration_mode: :u6709: :u7121: :u7533: :u55b6: :u6708: :eight_pointed_black_star: :vs: :white_flower: :ideograph_advantage: :secret: :congratulations: :u5408: :u6e80: :u5272: :u7981: :a: :b: :ab: :cl: :o2: :sos: :x: :o: :octagonal_sign: :no_entry: :name_badge: :no_entry_sign: :100: :anger: :hotsprings: :no_pedestrians: :do_not_litter: :no_bicycles: :non-potable_water: :underage: :no_mobile_phones: :no_smoking: :exclamation: :grey_exclamation: :question: :grey_question: :bangbang: :interrobang: :low_brightness: :high_brightness: :part_alternation_mark: :warning: :children_crossing: :trident: :fleur-de-lis: :beginner: :recycle: :white_check_mark: :u6307: :chart: :sparkle: :eight_spoked_asterisk: :negative_squared_cross_mark: :globe_with_meridians: :diamond_shape_with_a_dot_inside: :m: :cyclone: :zzz: :atm: :wc: :wheelchair: :parking: :u7a7a: :sa: :passport_control: :customs: :baggage_claim: :left_luggage: :mens: :womens: :baby_symbol: :restroom: :put_litter_in_its_place: :cinema: :signal_strength: :koko: :symbols: :information_source: :abc: :abcd: :capital_abcd: :ng: :ok: :up: :cool: :new: :free: :zero: :one: :two: :three: :four: :five: :six: :seven: :eight: :nine: :keycap_ten: :1234: :hash: :asterisk: :arrow_forward: :pause_button: :play_pause: :stop_button: :record_button: :eject: :track_next: :track_previous: :fast_forward: :rewind: :arrow_double_up: :arrow_double_down: :arrow_backward: :arrow_up_small: :arrow_down_small: :arrow_right: :arrow_left: :arrow_up: :arrow_down: :arrow_upper_right: :arrow_lower_right: :arrow_lower_left: :arrow_upper_left: :arrow_up_down: :left_right_arrow: :arrow_right_hook: :leftwards_arrow_with_hook: :arrow_heading_up: :arrow_heading_down: :twisted_rightwards_arrows: :repeat: :repeat_one: :arrows_counterclockwise: :arrows_clockwise: :musical_note: :notes: :heavy_plus_sign: :heavy_minus_sign: :heavy_division_sign: :heavy_multiplication_x: :heavy_dollar_sign: :currency_exchange: :wavy_dash: :curly_loop: :loop: :end: :back: :on: :top: :soon: :heavy_check_mark: :ballot_box_with_check: :radio_button: :white_circle: :black_circle: :red_circle: :blue_circle: :small_red_triangle: :small_red_triangle_down: :small_orange_diamond: :small_blue_diamond: :large_orange_diamond: :large_blue_diamond: :white_square_button: :black_square_button: :black_small_square: :white_small_square: :black_medium_small_square: :white_medium_small_square: :black_medium_square: :white_medium_square: :black_large_square: :white_large_square: :speaker: :mute: :sound: :loud_sound: :bell: :no_bell: :mega: :loudspeaker: :speech_left: :eye_in_speech_bubble: :speech_balloon: :thought_balloon: :anger_right: :spades: :clubs: :hearts: :diamonds: :black_joker: :flower_playing_cards: :mahjong: :clock1: :clock2: :clock3: :clock4: :clock5: :clock6: :clock7: :clock8: :clock9: :clock10: :clock11: :clock12: :clock130: :clock230: :clock330: :clock430: :clock530: :clock630: :clock730: :clock830: :clock930: :clock1030: :clock1130: :clock1230:".split(" ")},flags:{header:":flag_black:",content:":flag_white: :flag_black: :checkered_flag: :triangular_flag_on_post: :rainbow_flag: :flag_af: :flag_ax: :flag_al: :flag_dz: :flag_as: :flag_ad: :flag_ao: :flag_ai: :flag_aq: :flag_ag: :flag_ar: :flag_am: :flag_aw: :flag_au: :flag_at: :flag_az: :flag_bs: :flag_bh: :flag_bd: :flag_bb: :flag_by: :flag_be: :flag_bz: :flag_bj: :flag_bm: :flag_bt: :flag_bo: :flag_ba: :flag_bw: :flag_br: :flag_io: :flag_vg: :flag_bn: :flag_bg: :flag_bf: :flag_bi: :flag_kh: :flag_cm: :flag_ca: :flag_ic: :flag_cv: :flag_bq: :flag_ky: :flag_cf: :flag_td: :flag_cl: :flag_cn: :flag_cx: :flag_cc: :flag_co: :flag_km: :flag_cg: :flag_cd: :flag_ck: :flag_cr: :flag_ci: :flag_hr: :flag_cu: :flag_cw: :flag_cy: :flag_cz: :flag_dk: :flag_dj: :flag_dm: :flag_do: :flag_ec: :flag_eg: :flag_sv: :flag_gq: :flag_er: :flag_ee: :flag_et: :flag_eu: :flag_fk: :flag_fo: :flag_fj: :flag_fi: :flag_fr: :flag_gf: :flag_pf: :flag_tf: :flag_ga: :flag_gm: :flag_ge: :flag_de: :flag_gh: :flag_gi: :flag_gr: :flag_gl: :flag_gd: :flag_gp: :flag_gu: :flag_gt: :flag_gg: :flag_gn: :flag_gw: :flag_gy: :flag_ht: :flag_hn: :flag_hk: :flag_hu: :flag_is: :flag_in: :flag_id: :flag_ir: :flag_iq: :flag_ie: :flag_im: :flag_il: :flag_it: :flag_jm: :flag_jp: :crossed_flags: :flag_je: :flag_jo: :flag_kz: :flag_ke: :flag_ki: :flag_xk: :flag_kw: :flag_kg: :flag_la: :flag_lv: :flag_lb: :flag_ls: :flag_lr: :flag_ly: :flag_li: :flag_lt: :flag_lu: :flag_mo: :flag_mk: :flag_mg: :flag_mw: :flag_my: :flag_mv: :flag_ml: :flag_mt: :flag_mh: :flag_mq: :flag_mr: :flag_mu: :flag_yt: :flag_mx: :flag_fm: :flag_md: :flag_mc: :flag_mn: :flag_me: :flag_ms: :flag_ma: :flag_mz: :flag_mm: :flag_na: :flag_nr: :flag_np: :flag_nl: :flag_nc: :flag_nz: :flag_ni: :flag_ne: :flag_ng: :flag_nu: :flag_nf: :flag_kp: :flag_mp: :flag_no: :flag_om: :flag_pk: :flag_pw: :flag_ps: :flag_pa: :flag_pg: :flag_py: :flag_pe: :flag_ph: :flag_pn: :flag_pl: :flag_pt: :flag_pr: :flag_qa: :flag_re: :flag_ro: :flag_ru: :flag_rw: :flag_ws: :flag_sm: :flag_st: :flag_sa: :flag_sn: :flag_rs: :flag_sc: :flag_sl: :flag_sg: :flag_sx: :flag_sk: :flag_si: :flag_gs: :flag_sb: :flag_so: :flag_za: :flag_kr: :flag_ss: :flag_es: :flag_lk: :flag_bl: :flag_sh: :flag_kn: :flag_lc: :flag_pm: :flag_vc: :flag_sd: :flag_sr: :flag_sz: :flag_se: :flag_ch: :flag_sy: :flag_tw: :flag_tj: :flag_tz: :flag_th: :flag_tl: :flag_tg: :flag_tk: :flag_to: :flag_tt: :flag_tn: :flag_tr: :flag_tm: :flag_tc: :flag_tv: :flag_vi: :flag_ug: :flag_ua: :flag_ae: :flag_gb: :flag_us: :flag_uy: :flag_uz: :flag_vu: :flag_va: :flag_ve: :flag_vn: :flag_wf: :flag_eh: :flag_ye: :flag_zm: :flag_zw: :flag_ac: :flag_ta: :flag_bv: :flag_hm: :flag_sj: :flag_um: :flag_ea: :flag_cp: :flag_dg: :flag_mf: :united_nations: :england: :scotland: :wales:".split(" ")},controllers:{header:'<i class="icon-gamepad icon-lg"></i>',selector:".smilies_list section.controllers"}};f(".community_badges",".smilies_list").length&&(t.community_badges={header:":busts_in_silhouette:",selector:".smilies_list section.community_badges"});function _(a){var e=f(a).closest("form").find(".ntags_btns .emojionepicker-picker");f('<div class="'+i+'"><nav></nav></div>').insertAfter(e);var o="";f.each(t,function(a,e){var _=0===e.header.indexOf(":")?emojione.shortnameToImage(e.header):e.header;o+='<div class="tab'+("neo"==a?" active":"")+'" data-tab="'+a+'" onclick="">'+_+"</div>"}),f(e).siblings("."+i).find("nav").append(o),f(e).siblings("."+i).find("nav .tab").click(function(){m(e,f(this).attr("data-tab"))}),f(document).off("click","."+i+" section .emojione"),f(document).on("click","."+i+" section .emojione",function(){var a,e=n.selectionStart,_=f(n).val();a="shortcode"==l.type?f(this).attr("title"):f(this).attr("alt"),f(n).val(_.substring(0,e)+a+_.substring(e)),f(n).focus(),n.selectionStart=e+a.length,n.selectionEnd=e+a.length,g(f(this).attr("title")),"neo"==f(this).closest("."+i).find("nav .tab.active").data("tab")&&s()}),f(document).on("click","section.neo a img",function(){var a=f(this).closest("a").clone();a.wrap("<div></div>"),g(a.parent().html()),"neo"==f(this).closest("."+i).find("nav .tab.active").data("tab")&&s()})}var o,r,s=function(){var a=c();if(a.length){var _='<div class="heading">Recently used</div>';f.each(a,function(a,e){_+=0===e.indexOf(":")?emojione.shortnameToImage(e):e}),f("section.neo .recent","."+i).html(_)}},c=function(){return nuser.emojis},g=function(a){nuser.memberid&&(nuser.emojis.unshift(a),nuser.emojis=nuser.emojis.unique().slice(0,40),f.post("",{in_ajax_mode:1,act:"save_recent_emojis",emojis:a}))},m=function(a,e){if(0<f(a).siblings("."+i).find("section."+e).length){if(f(a).siblings("."+i).find(".tab[data-tab='"+e+"']").hasClass("active"))return;f(a).siblings("."+i).find("section").hide(0,function(){"neo"==e&&s(),f(this).hide(),f(this).closest("."+i).find("section."+e).show(),f(this).closest("."+i).find(".tab").removeClass("active"),f(this).closest("."+i).find(".tab[data-tab='"+e+"']").addClass("active")})}else if(void 0!==t[e]){var _="";void 0!==t[e].content?(f.each(t[e].content,function(a,e){_+=0===e.indexOf(":")?emojione.shortnameToImage(e):e}),f('<section class="'+e+' hide">'+_+"</section>").insertAfter(f(a).siblings("."+i).find("nav"))):void 0!==t[e].selector&&(f(t[e].selector+":eq(0)").insertAfter(f(a).siblings("."+i).find("nav")).addClass("hide"),"neo"==e?(f("."+i+" section."+e).prepend('<div class="recent"></div>'),s()):"community_badges"!=e&&"controllers"!=e||f("img","."+i+" section."+e).each(function(){f(this).attr("src",f(this).data("src"))})),f(a).siblings("."+i).find("section").hide(0,function(){f(this).closest("."+i).find("section").removeClass("hide"),f(this).closest("."+i).find("section."+e).show(),f(this).closest("."+i).find(".tab").removeClass("active"),f(this).closest("."+i).find(".tab[data-tab='"+e+"']").addClass("active")})}};o=document.createElement("script"),r=document.querySelector("head"),o.src="//cdn.jsdelivr.net/npm/emojione@4.0.0/lib/js/emojione.min.js",r.appendChild(o),o.onload=function(){_(e[0]),f.each(e,function(a,e){var _=f(e).attr("id");f('.emojionepicker-picker[data-target="#'+_+'"]').show()}),f(document).on("click",".emojionepicker-picker",function(){var a=f(this).attr("data-target");n=document.getElementById(a.substr(1)),f(this).next().is("."+i)||_(n),m(this,f(this).siblings("."+i).find("nav div.active").attr("data-tab")),f("."+i).fadeIn()}),f(document).on("click",function(a){0==f("."+i).is(":visible")||f(a.target).is(".emojionepicker, .emojione, .emojionepicker img")||f(a.target).parent().is(".emojionepicker-picker")||f(a.target).parents().is(".emojionepicker")||f("."+i).fadeOut()})};return this}}(jQuery);$.fn.extend({unwrap:function(){this.parent(':not(body)').each(function(){$(this).replaceWith(this.childNodes);});return this;},dataset:function(key,value){if(arguments.length===1){return($(this).attr('data-'+key));}else{$(this).attr('data-'+key,value);return;}}});$(function(){settings={ajax:{data_prefix:'in_ajax_mode=1&act=',timeout:15000},personal_message:{maximum_characters:180}};func={ajax:{verify_sync:function(server_reply){if(server_reply==='false'){window.location.reload();return false;}else if(server_reply=='censor'){alert('Submitted data contains censored materials. Please submit appropriate content only.');return false;}else if(server_reply==='killTimeout'||typeof(server_reply)=='object'&&server_reply.responseText=='killTimeout'){clearTimeout(refresh_data_timeout);return false;}
return true;}}};$.ajaxSetup({error:function(){},success:function(server_reply){func.ajax.verify_sync(server_reply);},timeout:settings.ajax.timeout});function isJson(str){try{JSON.parse(str);}catch(e){return false;}
return true;}
$.nBox={convert_array_into_string:function(error_msgs){if($.isArray(error_msgs)){return'<ul><li>'+error_msgs.join('</li><li>')+'</li></ul>';}else{return error_msgs;}},convert_message:function(ajaxResponse){var e;if(isJson(ajaxResponse.responseText)){var json_data=JSON.parse(ajaxResponse.responseText);e=json_data.error_messages;}else if(typeof ajaxResponse.responseText!='undefined'){e=ajaxResponse.responseText;}else if(typeof ajaxResponse=='string'){e=ajaxResponse;}else if($.isArray(ajaxResponse)){return this.convert_array_into_string(ajaxResponse);}else{return;}
return this.convert_array_into_string(e);},display_error:function(parentEl,ajaxResponse,allow_multiple){if(typeof(allow_multiple)=='undefined'){this.reset(parentEl);}
var errorHTML=this.convert_message(ajaxResponse);if(parentEl==null){$('body').append(this.modalHTML('text-error','icon-warning-sign',errorHTML));$('#nBox-modal').modal('show');}else{$(parentEl).prepend('<div class="nBox error">'+errorHTML+'</div>');$.scrollToIfNotVisible(parentEl,300);}
return false;},display_message:function(parentEl,ajaxResponse){this.reset(parentEl);var messageHTML=this.convert_message(ajaxResponse);if(parentEl==null){$('body').append(this.modalHTML('text-success','icon-ok',messageHTML));$('#nBox-modal').modal('show');}else{$(parentEl).prepend('<div class="nBox success">'+messageHTML+'</div>');$.scrollToIfNotVisible(parentEl,300);}
return true;},display_info:function(parentEl,ajaxResponse){this.reset(parentEl);var messageHTML=this.convert_message(ajaxResponse);$(parentEl).prepend('<div class="nBox alert alert-info">'+messageHTML+'</div>');return true;},reset:function(parentEl){$('#nBox-modal').modal('hide').remove();$('.nBox',parentEl).remove();},modalHTML:function(header_class,icon_class,message_body){return'<div id="nBox-modal" class="modal hide"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button><h3 class="'+header_class+'"><i class="'+icon_class+' icon-lg"></i> '+(header_class=='text-success'?'Message':'Error')+'</h3></div><div class="modal-body">'+message_body+'</div><div class="modal-footer"><button class="btn" data-dismiss="modal" aria-hidden="true">Close</button></div></div>';}};$.nAlert={timeoutVar:null,position:function(position){if($.inArray(position,["top_center","bottom_right"])==-1){return'top_center';}
return position;},display_error:function(error,position,timeout){this.reset();timeout=timeout||3000;position=this.position(position);$('body').append('<div id="nAlert" class="alert alert-error '+position+'"><span><i class="icon-warning-sign icon-lg"></i> '+error+'</span></div>');this.timeoutVar=setTimeout("$.nAlert.reset();",timeout);},display_message:function(message,position,timeout){this.reset();timeout=timeout||3000;position=this.position(position);$('body').append('<div id="nAlert" class="alert alert-success '+position+'"><span><i class="icon-ok icon-lg"></i> '+message+'</span></div>');this.timeoutVar=setTimeout("$.nAlert.reset();",timeout);},reset:function(){if(this.timeoutVar!=null){clearTimeout(this.timeoutVar);}
$('#nAlert').remove();}};$.nMessage={timeoutVar:null,prepare_error:function(error_msgs){if($.isArray(error_msgs)){return error_msgs.join(', ');}else{return error_msgs;}},append_error:function(parentEl,ajaxResponse){this.reset(parentEl);var e;if(typeof ajaxResponse.responseText!='undefined'){var json_data=JSON.parse(ajaxResponse.responseText);e=json_data.error_messages;}else if(typeof ajaxResponse=='string'){e=ajaxResponse;}else{return;}
var errorHTML=this.prepare_error(e);if(parentEl==null){$('body').append('<div id="nBox-modal">'+errorHTML+'</div>');$('#nBox-modal').dialog({height:140,modal:true});}else{$(parentEl).append('<span class="alert alert-error"><i class="icon-warning-sign icon-lg"></i>'+errorHTML+'</span>');}
return false;},append_message:function(parentEl,message){this.reset(parentEl);$(parentEl).append('<span class="alert alert-success">'+message+'</span>');this.timeoutVar=setTimeout("$('span.alert', '"+parentEl+"').remove();",3500);},reset:function(parentEl){if(this.timeoutVar!=null){clearTimeout(this.timeoutVar);}
$('#nBox-modal').remove();$('span.alert',parentEl).remove();}};get_avatar_url_by_size=function(url,size){if(url.indexOf('neoseeker.com')!==-1){var replace='/m/';if(size=='s'){replace='/m/s/';}
else if(size=='xs'){replace='/m/xs/';}
return url.replace('/m/',replace);}
return url;};check_if_url_is_neo_thread=function(urlStr){return urlStr.match(/neoseeker\.com\/forums\/\d+\/t(\d+)\-([\w\-]+)\//)||urlStr.match(/neoseeker\.com\/news\/(\d+)\-([\w\-]+)\//)||urlStr.match(/neoseeker\.com\/Articles\/([\w\-\/]+)\//);}});attach_link_to_resized_image=function(){var natural_width=$(this).attr('naturalWidth');var width=$(this).width();if(natural_width>width&&!$(this).parents('a').length){$(this).wrap('<a href="'+$(this).attr('src')+'" class="resizedclick"></a>');}};resize_video_iframe=function(){if(!BrowserDetect.show_mobile_mode()&&$(this).parents().is('.shareobj')&&$(this).parents().is('known-video')){return;}
var origWidth=parseInt($(this).attr('width'));var origHeight=parseInt($(this).attr('height'));var width=$(this).width();var height=$(this).height();if(BrowserDetect.browser==='Explorer'){if($(this).parents('.view_full_pm_thread').length&&(BrowserDetect.version===6||BrowserDetect.version===7)){$(this).removeAttr('height').removeAttr('width');}}
var maxwidth=$(this).closest('div,blockquote,ul,ol').width();var resize=maxwidth / origWidth;if(maxwidth&&width>maxwidth){var newheight=height*resize;$(this).width(maxwidth);$(this).height(parseInt(newheight+(newheight*0.05)));}else if(width!=origWidth&&width==maxwidth){var newheight=origHeight*resize;$(this).height(parseInt(newheight+(newheight*0.05)));}};page_postprocess=function(){$('.threadmsg img, .previewbox img, .pm_body img, .review_body_text img').each(attach_link_to_resized_image);$('.threadmsg iframe, .previewbox iframe, .pm_body iframe, .post_body iframe, .review_body_text iframe, #article_body iframe, .commenttext iframe, #news_story iframe, [data-in_mode="mobile"] #news_story_full iframe, .newsbox iframe, #wiki-content iframe, #wiki-content video, [data-in_mode="mobile"] .shareobj iframe, [data-in_mode="mobile"] .shareobj object embed, [data-in_mode="mobile"] .shareobj object').each(resize_video_iframe);};$(document).ready(page_postprocess);lettercounter=function(inputEl,char_limit){var characters_left=char_limit-$(inputEl).val().length_with_bitly_url();var $charsleftEl=$(inputEl).parents('form').find('.charsleft');$charsleftEl.text(characters_left).removeClass('label-warning label-important');if(characters_left<=0){$charsleftEl.addClass('label-important');}else if(characters_left<=10){$charsleftEl.addClass('label-warning');}};message_render_postprocess=function(messageEl){$('img',messageEl).each(attach_link_to_resized_image);$('iframe',messageEl).each(resize_video_iframe);if(typeof hljs!="undefined"){$('pre code',messageEl).each(function(i,e){hljs.highlightBlock(e,'    ')});}
if(typeof collapse_blockquotes!='undefined'){$(messageEl+' > blockquote.bqt').each(collapse_blockquotes);}};insert_akbar_form=function(formEl){$('<input />').attr({type:'hidden',name:'rowendo',value:'df1c3ba8a187f2ec767cae4827e40b6a'}).appendTo(formEl);};$(function(){insert_akbar_form('form.akbar');$('.read-more[data-toggle="collapse"]').siblings('.collapse').on('shown',function(){var action=$(this).siblings('.read-more').data('action')||'Read';$(this).siblings('.read-more').text(action+' less');ga('send','event','Read more button','expand',window.location.pathname);}).on('hide',function(){var action=$(this).siblings('.read-more').data('action')||'Read';$(this).siblings('.read-more').text(action+' more');$.scrollToIfNotVisible(this,500,{axis:'y'});ga('send','event','Read more button','collapse',window.location.pathname);});if(!BrowserDetect.show_mobile_mode()||typeof mobileGrade!="undefined"&&mobileGrade=='A'){collapse_blockquotes=function(){if(this.scrollHeight>this.clientHeight){let read_more=(!BrowserDetect.show_mobile_mode())?'<div class="text">Read more</div>':'';$(this).addClass('collapsed').prepend('<i class="toggle icon-expand-alt"></i> ').append('<div class="collapsed-expand"><i class="icon-ellipsis-horizontal icon-2x"></i>'+read_more+'</div>');}};$('.threadmsg > blockquote.bqt').each(collapse_blockquotes);$('.comment .commenttext > blockquote.bqt','#comments_list').each(collapse_blockquotes);$('.pm .pm_body > blockquote.bqt','#view_pm_thread').each(collapse_blockquotes);collapse_content=function(){if(this.scrollHeight>this.clientHeight){let read_more=(!BrowserDetect.show_mobile_mode())?'<div class="text">Read more</div>':'';$(this).addClass('collapsed').append('<div class="collapsed-expand"><i class="icon-ellipsis-horizontal icon-2x"></i>'+read_more+'</div><button class="collapsed-collapse btn hide">Read less</button>');}};$('.collapsed_wrapper').each(collapse_content);$(document).on('click','blockquote .toggle, blockquote .collapsed-expand, .mobile #threadlist .messagerow .body.collapsed .collapsed-expand, .collapsed_wrapper.collapsed .collapsed-expand, .collapsed_wrapper .collapsed-collapse',function(e){var expand='icon-expand-alt';var collapse='icon-collapse-alt';var $el=$(this).closest('blockquote'),src='blockquote',parentEl='';if(!$el.length&&$(this).parents().is('.body')){$el=$(this).closest('.body');src='thread message';if(BrowserDetect.show_mobile_mode()){parentEl='.wrapper > ';}}else if(!$el.length&&$(this).parents().is('.collapsed_wrapper')){$el=$(this).closest('.collapsed_wrapper');src=($el.data('field')||'content');}
var if_collapsed=$el.hasClass('collapsed');if(if_collapsed){$($el).children('.toggle').removeClass(expand).addClass(collapse);$el.removeClass('collapsed').addClass('expanded').find(parentEl+'.collapsed-expand').hide().next('.collapsed-collapse').removeClass('hide');ga('send','event','Collapsed '+src,'expand',window.location.pathname);}else{$($el).children('.toggle').removeClass(collapse).addClass(expand);$el.addClass('collapsed').removeClass('expanded').find(parentEl+'.collapsed-expand').show().next('.collapsed-collapse').addClass('hide');$.scrollToIfNotVisible($el,500,{axis:'y'});ga('send','event','Collapsed '+src,'collapse',window.location.pathname);}});}
open_social_signin_window=function(url){if(BrowserDetect.browser==='Explorer'){url+=(url.indexOf('?')==-1?'?':'&')+'ft='+encodeURIComponent(window.location);}
window.open(url,'_blank',"width=1000,height=600,menubar=0");};$(document).on('click',".facebook_signin",function(e){e.preventDefault();var url=PROJECT_HOST+"fb/redirect.php";var callback=$(this).dataset('callback');if(callback){url+='?callback='+callback;}
open_social_signin_window(url);}).on('click',".twitter_signin",function(e){e.preventDefault();var url=PROJECT_HOST+"tw/redirect.php";if($(this).parents().hasClass('user_panel')){url+='?src=userpanel';}
var callback=$(this).dataset('callback');if(callback){url+=(url.indexOf('?')==-1?'?':'&')+'callback='+callback;}
open_social_signin_window(url);}).on('click',".google_signin",function(e){e.preventDefault();open_social_signin_window(PROJECT_HOST+"google/redirect.php");}).on('click',".yahoo_signin",function(e){e.preventDefault();open_social_signin_window(PROJECT_HOST+"openid/redirect.php?provider=yahoo");}).on('click',".steam_signin",function(e){e.preventDefault();open_social_signin_window(PROJECT_HOST+"openid/redirect.php?provider=steam");}).on('click',".windowslive_signin",function(e){e.preventDefault();open_social_signin_window(PROJECT_HOST+"windowslive/redirect.php");});$(document).on('click','.postreply_tab_toggle a',function(e){e.preventDefault();if($(this).parent().hasClass('active')){return false;}
var $ul=$(this).closest('ul.postreply_tab_toggle');var selected=$(this).data('tab');$('li',$ul).removeClass('active');$(this).parent().addClass('active');if(selected=='postreply_tab_preview'){var h=$ul.siblings('.postreply_tab_field').height();$ul.siblings('.postreply_tab_preview').css('min-height',h+'px');if(!BrowserDetect.show_mobile_mode()&&!($ul.parents().hasClass('ui-dialog'))){var w=$ul.siblings('.postreply_tab_field').width();$ul.siblings('.postreply_tab_preview').width(w);}}
$ul.siblings('.postreply_tab_field,.postreply_tab_preview').addClass('hide');$ul.siblings('.'+selected).removeClass('hide');});});var qs_results=[];function qs_escape(kw){var kw=$.trim(kw.substr(0,25).toLowerCase()).replace(/(^\+|\+$|[:()])/,'');return escape(encodeURIComponent(kw).replace(/%20/g,'_').replace(/_+/,'_'));}
function qs(json_reply){$('html').removeClass('busy');if($('.neo-search','#header').hasClass('dropdown')){var kw=qs_escape($('#neo-search').val()).replace(/_/g,' ');var rs_kw=qs_escape(json_reply.keywords).replace(/_/g,' ');if(rs_kw!=kw){console.debug(rs_kw+" != "+kw);return false;}
if(json_reply.forums.length>0){var html='';for(var i=0;i<Math.min(json_reply.forums.length,10);i++){var forum=json_reply.forums[i];html+='<a href="'+forum.url+'"><div><i class="icon-comments icon-fw"></i> '+forum.name+'</div></a>';}
$('div.rs','#neo-search-menu div[data-tab="forums"]').html(html);}
if(json_reply.products.length>0){var html='';for(var i=0;i<Math.min(json_reply.products.length,10);i++){var product=json_reply.products[i];html+='<a href="'+product.url+'"><div><div class="minipic"><img src="'+(product.image?product.image:'https://cdn.staticneo.com/neoassets/icons/logo_icon.png')+'" /></div><div class="title">'+product.name+'</div></div></a>';}
$('div.rs','#neo-search-menu div[data-tab="products"]').html(html);}}else{var callback=$('body').data('qs_callback');if(typeof callback=='function'){callback(json_reply.forums);}}}
function scroll_to_fix($main_div){var $main_content=$("div[data-sticky_main_scrollable='true']");var $right_div=$("div[data-sticky_right='true']");var $right_content=$("div[data-sticky_right_content='true']");$main_div.css('min-height','');$right_div.css('min-height','');if($main_div.length&&$right_div.length&&$right_content.length&&($main_div.height()-$right_div.height())>30){$right_div.css('min-height',$main_div.height());var content_height=Math.ceil($right_content.height());var window_height=Math.ceil($(window).innerHeight());var window_bottom=Math.ceil($(window).scrollTop())+window_height;var div_bottom=Math.ceil($right_div.offset().top)+Math.ceil($right_div.height());if(content_height>window_height&&window_bottom<div_bottom){$right_content.css('bottom','5px');}
$right_content.scrollToFixed($right_div,$main_div);}else if($main_div.length&&$right_div.length&&$main_content.length&&$main_div.height()<$right_div.height()){$main_div.css('min-height',$right_div.height());$main_content.scrollToFixed($main_div,$main_div);}}
function hoverIntent_over(){if($(this).data('over-callback').length>0){var over_callback=eval($(this).data('over-callback'));over_callback($(this));}}
function hoverIntent_out(){if($(this).data('out-callback').length>0){var out_callback=eval($(this).data('out-callback'));out_callback($(this));}}
var header_hoverintent_over=function(obj){$(obj).addClass('dropdown');};var header_hoverintent_out=function(obj){$(obj).removeClass('dropdown');};function header_forums_over(obj){var html=$(obj).data('html');if(html){header_hoverintent_over(obj);$('.dropdown-menu',obj).html(html);return;}
$.ajax({url:'https://cdn.staticneo.com/neoassets/data/neo_header_forums.json',dataType:'jsonp',jsonp:false,cache:true});}
function display_neo_header_forums(response){var obj=$('#page_header_forums');header_hoverintent_over(obj);$(obj).data('html',response.source);$('.dropdown-menu',obj).html(response.source);}
function nf_header_community_over(obj){var html=$(obj).data('html');if(html){header_hoverintent_over(obj);$('.dropdown-menu',obj).html(html);return;}
$.ajax({url:'https://cdn.staticneo.com/neoassets/data/neo_forums_header_community.json',dataType:'jsonp',jsonp:false,cache:true});}
function display_neo_forums_header_community(response){var obj=$('#forum-header-community');header_hoverintent_over(obj);$(obj).data('html',response.source);$('.dropdown-menu',obj).html(response.source);}
$(function(){if($.fn.hoverIntent!=undefined){$('.hoverintent').hoverIntent({over:hoverIntent_over,timeout:500,out:hoverIntent_out});}
$(document).on('click','.hidden_text',function(){$(this).addClass('shown stuck');}).on('mouseenter','.hidden_text',function(){$(this).addClass('shown');}).on('mouseleave','.hidden_text:not(.stuck)',function(){$(this).removeClass('shown');});$('.dropdown-menu','#header_platforms').each(function(index){var header_platform=$(this).data('header-platform');var platform_html=$('#plaform_content_'+header_platform);$(this).html(platform_html);});if($.fn.qtip!=undefined){$('.qtooltip[title]').qtip({position:{target:'mouse',adjust:{x:16,y:16,method:'shift none'}},style:{tip:false,classes:'qtip-dark qtip-shadow'}});}
var $main_div=$("div[data-sticky_main='true']");if($main_div.length){if(typeof imagesLoaded!=='undefined'){$main_div.imagesLoaded(function(){scroll_to_fix($main_div);});}else{scroll_to_fix($main_div);}}
$('input#neo-search').attr('autocomplete','off').on('focus',function(){if($(this).val()){$('.neo-search','#header').addClass('dropdown');}}).on('keyup input',function(e){var kw=$(this).val();if(!kw.length||!(/^[a-z0-9]/i.test(kw))){return false;}
if(e.which==13){$(this).closest('form').submit();return false;}
kw=qs_escape(kw);$.ajax({url:'https://cdn.staticneo.com/neoassets/data/qs/'+kw.substr(0,1)+'/'+kw+'.json',dataType:'jsonp',jsonp:false,cache:true,beforeSend:function(){$('html').addClass('busy');$('.neo-search:not(.dropdown)','#header').addClass('dropdown');}});});$(document).on('click',function(e){if(!$(e.target).parents().hasClass('neo-search')){$('.neo-search.dropdown','#header').removeClass('dropdown');}});var community_array=[];generate_community_card=function(community,badge){var button_class=(community.connection.is_member_of_community)?'btn-danger':'btn-success';var button_text=(community.connection.is_member_of_community)?'Leave':'Join';var html='<div class="span6 well-dark community_card_wrapper" style="padding: 0"><div class="row"><div class="span6"><div style="padding: 6px">';html+='<h1 class="section-spaced-small pull-left"><a href="'+community.url+'">'+community.name+'</a></h1>';if(badge){html+='<div class="pull-right"><img src="'+badge.url+'" />';html+=(badge.title.length>0)?' <span class="label">'+badge.title+'</span>':'';html+='</div>';}
html+='<div class="clear"></div>';html+=(community.description)?'<p>'+community.description+'</p>':'';html+='<a href="'+community.url+'members/"><span class="total_community_members">'+community.total_members+'</span> '+community.members_label+'</a>';html+='</div></div></div>';html+='<div class="row"><div class="span6" style="background-color: #555"><div style="padding: 6px">';html+='<button class="btn community_member '+button_class+'" data-communityid="'+community.communityid+'" data-is-member="'+community.connection.is_member_of_community+'">'+button_text+' Community</button>';html+='</div></div></div></div>';return html;};$('body').on('mouseover','.activity_whoshared, .activity_wholiked',function(event){var activityid=$(this).dataset('activityid');var type=$(this).hasClass('activity_wholiked')?'like':'share';$(this).qtip({overwrite:false,content:{text:'Loading...',ajax:{url:'/api_proxy/activity/'+activityid+'/'+type+'s/',type:'GET',dataType:'json',error:function(){this.hide();this.disable(true);},success:function(json_reply,status){if(!json_reply){$('.activity_who'+type+'d[data-activityid="'+activityid+'"]').qtip('destroy');return;}
var showWho_limit=5;var htmlStr='';var linked_usernames=[];if(type=='like'){for(var i=0;i<json_reply.length;i++){var avatarURL=json_reply[i].avatar_img.replace('/m/','/m/xs/');var link='<div'+(i>=showWho_limit?' class="hide"':'')+'><a href="'+json_reply[i].url+'" rel="nofollow"><img src="'+avatarURL+'" alt="" class="avatar" data-username="'+json_reply[i].username+'" /> <span class="username">'+json_reply[i].username+'</span></a></div>';linked_usernames.push(link);}}else{var data=json_reply.data;var results=data.direct.concat(data.viral);var duplicated;for(i=0;i<results.length;i++){if(results[i].counted!=1){duplicated=[];duplicated=$.grep(results,function(e){if(e.memberid==results[i].memberid){e.counted=1;return true;}
return false;});var avatarURL=results[i].avatar_img.replace('/m/','/m/xs/');var link='<div'+(linked_usernames.length>=showWho_limit?' class="hidden"':'')+'><a href="'+results[i].url+'"><img src="'+avatarURL+'" alt="" class="avatar" data-username="'+results[i].username+'" rel="nofollow" /> <span class="username">'+results[i].username+'</span></a>';if(duplicated.length>1){link+=' x '+duplicated.length;}
link+='</div>';linked_usernames.push(link);}}}
if(linked_usernames.length){htmlStr+='<div><strong>Who '+type+'d this</strong></div>'+linked_usernames.join('');if(linked_usernames.length>showWho_limit){htmlStr+='<div><a href="#" class="toggle_hidden">Show all...</a></div>';}}
this.set('content.text',htmlStr);}}},style:{width:130,classes:'qtip-dark showWho',tip:true},position:{at:"bottom center",my:"top center",viewport:$('body')},show:{delay:300,event:event.type,ready:true,effect:function(){$(this).fadeIn(300);}},hide:{fixed:true,delay:300,effect:function(){$(this).fadeOut(300);}}});}).on('mouseover','.community',function(event){if(!nuser.memberid){return;}
var content=null;var badge=null;var communityid=$(this).data('communityid');if($(this).hasClass('community_badge')){badge=[];badge.title=$(this).attr('title');badge.url=$(this).attr('src');}
if(typeof community_array[communityid]!='undefined'){var community=community_array[communityid];content=generate_community_card(community,badge);}
$(this).qtip({overwrite:false,content:{text:content||function(){return'<div class="span6"></div>';},ajax:content?undefined:{url:'/api_proxy/communities/'+communityid+'/',data:{user:'me'},type:'GET',dataType:'json',error:function(){this.hide();this.disable(true);},success:function(json_reply,status){if(json_reply.code&&json_reply.code>=400||json_reply.code>=400){this.hide();this.disable(true);return;}
var content=generate_community_card(json_reply,badge);this.set('content.text',content);$('#ui-tooltip-'+this.get('id')).data('community',json_reply);$('.community .tooltip_trigger').trigger('ajaxLoaded');community_array[json_reply.communityid]=json_reply;}}},position:{at:'top left',my:'top left',viewport:$('body')},show:{delay:500,event:event.type,ready:true,effect:function(){$(this).slideDown(400);}},hide:{fixed:true,delay:300},style:{width:'auto',classes:'community_card',tip:false},events:{show:function(event,api){if(typeof community_array[communityid]!='undefined'){var mid=community_array[communityid];$('#ui-tooltip-'+api.get('id')).data('community',community_array[communityid]);}}}},event);}).on('mouseover','.msg_wholiked',function(event){$(this).qtip({overwrite:false,content:{text:$(this).next('.msg_wholiked_box')},style:{width:130,classes:'qtip-dark showWho',tip:true},position:{at:"bottom center",my:"top center",viewport:$('body')},show:{delay:300,event:event.type,ready:true,effect:function(){$(this).fadeIn(300);}},hide:{fixed:true,delay:300,effect:function(){$(this).fadeOut(300);}}});});$(document).on('click','.showWho .toggle_hidden',function(e){e.preventDefault();$(this).closest('.showWho').find('div.hide').removeClass('hide');$(this).closest('div').remove();});});var masonry_imagesLoaded=null;enable_masonry_on_activity=function(opts){var options=$.extend({},{itemSelector:'a',columnWidth:10},opts);var $container=$(this);if($container.parents('.section-thumbnails').hasClass('gallery')){options.itemSelector='.thumbnail';}
$container.imagesLoaded(function(){masonry_imagesLoaded=true;$container.masonry(options);$('.caption',$container).show();});};var known_video_domains_regex='youtube|vimeo';var known_image_domains_regex='flickr|imgur|instagram|img\.ly|tinypic|giphy|gph\.is|deviantart|gfycat|smugmug|photobucket';var comment_limit_per_page=15;$(function(){validate_activityid=function(activityid){return($.isNumeric(activityid)&&activityid>0);};load_activity_comments=function(activityid,start,$footer){if(!validate_activityid(activityid)){return;}
if(!start){start=0;}
var limit=comment_limit_per_page;var $section_comments=$('.section-comments-simple',$footer);var if_section_comments_exists=($section_comments.length>0);var disallow_comments=$footer.data('disallow_comment');$.ajax({url:'/api_proxy/activity/'+activityid+'/comments/',type:'GET',data:{start:start,limit:limit},beforeSend:function(){if(!if_section_comments_exists){$('input:text',$footer).addClass('loading');}else{$.scrollTo($section_comments,500,{axis:'y',offset:{top:-30}});$section_comments.scrollTop(0);$section_comments.addLoadingOverlay();}},complete:function(){if(!if_section_comments_exists){$('input:text',$footer).removeClass('loading');}else{$section_comments.resetLoadingOverlay();}},error:function(jqXHR){$.nBox.display_error(null,jqXHR);},success:function(json_reply){if(!if_section_comments_exists){var sectionComments=$('<div class="section-comments-simple"><div class="comments"></div></div>');$footer.prepend(sectionComments);}else{$('.section-comments-simple > div.comments',$footer).empty();}
var commentDivs=render_comments(json_reply.data);$('.section-comments-simple > div.comments',$footer).append(commentDivs);$('.section-comments-simple time.timeago',$footer).timeago();$('span','a.activity_comment_load[data-activityid="'+activityid+'"]').text(json_reply.pagination.total_count);message_render_postprocess('.section-comments-simple > div.comments .comment .commenttext');if(!if_section_comments_exists){$('.activity_comment_load',$footer).addClass('disabled');$('input.post_comment',$footer).remove();if(!disallow_comments){$('.section-comments-simple',$footer).append(generate_simple_comment_form(activityid));}
$('.section-comments-simple textarea',$footer).focus();if(json_reply.pagination.total_count>limit&&json_reply.pagination.total_pages>1){$('.section-comments-simple > div.comments',$footer).after('<div class="pagination comment_pagination"></div>');init_comment_paginator(activityid,json_reply.pagination.total_count);}}else if(json_reply.pagination.total_count>limit&&json_reply.pagination.total_pages>1){var page=Math.ceil(start / comment_limit_per_page)+1;init_comment_paginator(activityid,json_reply.pagination.total_count,page)}}});};init_comment_paginator=function(activityid,item_count,onPage){$script('https://cdn.staticneo.com/neoassets/assets_file/vendor/simplePagination/jquery.simplePagination.1398812414.js','simplePagination');$script.ready('simplePagination',function(){var onPage=(onPage||1);$('.comment_pagination','.section[data-activityid="'+activityid+'"]').pagination({items:item_count+1,itemsOnPage:comment_limit_per_page,cssStyle:'light-theme',edges:1,currentPage:onPage,hrefTextPrefix:'',onPageClick:function(pageNumber,event){event.preventDefault();var new_start=(pageNumber-1)*comment_limit_per_page;load_activity_comments(activityid,new_start,$('.section-footer','.section[data-activityid="'+activityid+'"]'));}});});};render_comments=function(json_reply){$('body').append('<div class="commentRender"><div class="row-fluid comment"><div class="span1"><img src="" class="avatar" /></div><div class="span15"><div class="username_container"><a href="" class="username"></a> <time class="timeago"></time></div><div class="commentbody commenttext"></div><div class="footer"></div><div class="cchild"></div></div></div></div>');if(!$.isArray(json_reply)&&!$.isEmptyObject(json_reply)){json_reply=new Array(json_reply);}
if(json_reply==[]||json_reply=={}){return false;}
var puredata=[];puredata.results=json_reply;var directive={'.comment':{'data<-results':{'img@src':function(arg){return get_avatar_url_by_size(arg.item.created_by.avatar_img,'s');},'img@data-username':'data.created_by.username','a.username':'data.created_by.username','a.username@href':'data.created_by.url','a.username@class+':function(arg){if(!arg.item.created_by.memberid){return' guest';}else{return'';}},'.commentbody':function(arg){var comment='';if(arg.item.remarks){comment+='<div class="text-small muted section-spaced-small">*** '+arg.item.remarks+' ***</div>';}
comment+=arg.item.comment;return comment;},'time@datetime':'data.created','time':'data.created','div.cchild':function(arg){arg.item.results=arg.item.child;return arg.item.child.length>0?rfn(arg.item):'';}}}};var rfn=$('body > div.commentRender').compile(directive);$('body > div.commentRender').render(puredata,rfn);var commentDiv=$('body > div.commentRender > .comment');$('div.cchild div.commentRender div.comment',commentDiv).unwrap();$('body > div.commentRender').remove();$('a.username.guest',commentDiv).replaceWith('<span class="username guest">'+$('a.username.guest',commentDiv).html()+'</span>');return commentDiv;};$(document).on('click','.activity_comment_load',function(e){e.preventDefault();if($(this).hasClass('disabled')===false){var activityid=$(this).dataset('activityid');load_activity_comments(activityid,0,$('.section-footer','.section[data-activityid="'+activityid+'"]'));}}).on('focus','.section[data-activityid] .section-footer input.post_comment',function(e){e.preventDefault();var activityid=$(this).parents('.section').dataset('activityid');load_activity_comments(activityid,0,$('.section-footer','.section[data-activityid="'+activityid+'"]'));});});$(function(){open_login_box=function(classname,data){if(data&&data.url!==undefined){if(data.url.indexOf('http')==-1){data.url=window.location.href+data.url;}}
if(BrowserDetect.show_mobile_mode()){open_slide_menu();if(data&&data.url!==undefined){let form_action=$('form','#signin').attr('action');if(form_action.indexOf('forwardto')!=-1){form_action=form_action.split('?forwardto=')[0];}
$('form','#signin').attr('action',form_action+'?forwardto='+encodeURIComponent(data.url));}
if(data&&data.msg!==undefined){$('#signin').append('<div id="signin_msg" class="alert alert-light" style="margin-top: 15px;"><h4>Please Log In</h4>'+data.msg+'</div>');}
return false;}
$('#guest-backdrop').remove();if(classname!==undefined&&classname.length>0){data.classname=classname;}
$.post("/api_proxy/site/set_login_session/",data);$(".user_panel a.signin").parents('.module').toggleClass('hl');$("fieldset#signin_menu").toggle();$(".signin").toggleClass("menu-open");$('.open > .dropdown-toggle').dropdown('toggle');var username_length=$('#username','#signin_menu').val().length;var password_length=$('#password','#signin_menu').val().length;if(username_length>0&&password_length==0){$('#password','#signin_menu').focus();}else if(username_length==0){$('#username','#signin_menu').focus();}
if(data&&data.url!==undefined){let form_action=$('form#signin').attr('action');if(form_action.indexOf('forwardto')!=-1){form_action=form_action.split('?forwardto=')[0];}
$('form#signin').attr('action',form_action+'?forwardto='+encodeURIComponent(data.url));}
if(data&&data.msg!==undefined){$('#signin_menu').after('<div id="signin_msg" class="alert alert-light" style="position: absolute;width: 400px;top: 170px;left: 300px;"><h4>Please Log In / Use Social Sign-in to Continue</h4>'+data.msg+'</div>');}
return true;};$('body').on('click','.guest-action',function(e){e.preventDefault();e.stopPropagation();var classname=$(this).attr('class');classname=classname.replace(/(btn(-success)?|guest\-action|\s)+/g,'');var data=$(this).data();if(data.activityid==undefined){data.activityid=$('meta[name="activityid"]').attr('content');}
if(open_login_box(classname,data)){show_login_backdrop();}});if($('#nsgst').length>0){$('<input />').attr('type','hidden').attr('name','rowendo').val(Math.round(new Date().getTime()/ 1000)).appendTo('#nsgst');}
if(!BrowserDetect.show_mobile_mode()){$(document).on('click',".user_panel a.signin",function(e){e.preventDefault();open_login_box();});$("#signin_menu").mouseup(function(){return false});$(document).bind('click',function(e){var $clicked=$(e.target);if($clicked.parents("a.signin").length==0&&!$clicked.is('a.signin')&&$clicked.parents('#signin_menu').length==0&&!$clicked.is('#signin_msg')&&$clicked.parents('#signin_msg').length==0){$(".signin").removeClass("menu-open").parents('.module').removeClass("hl");$("#signin_menu").hide();$("#signin_msg").remove();$('#guest-backdrop').remove();}
if($clicked.parents().hasClass('neoforums')){close_forum_panes($clicked);}});show_login_backdrop=function(){$('body, html').animate({scrollTop:0},0);jQuery('<div/>',{id:'guest-backdrop',style:'z-index: 3000',"class":'modal-backdrop'}).appendTo('body');};}});var forum_search_jqXHR;var forum_search_result=[];$(function(){reset_search_results=function(tab_rel){$('#nf_search_results table').attr('class','');$('#nf_search_results tr.forumsearch_row, #nf_search_results tr.no_result').remove();$('#nf_search_results tr.loading').show().removeClass('odd').removeClass('even');$('#search_modal .toolbar .nav-pills li').removeClass('active');$('a[rel="'+tab_rel+'"]','#search_modal .toolbar .nav-pills').parents('li').addClass('active');if(tab_rel=='post'){$('td:first','#nf_search_results tr.column_titles').html('Message').next().html('').next().html('');}else if(tab_rel=='thread'){$('td:first','#nf_search_results tr.column_titles').html('Thread title').next().html('From').next().html('Last replied');}else if(tab_rel=='forum'){$('td:first','#nf_search_results tr.column_titles').html('Forum title').next().html('Platform').next().html('Last posted');}else if(tab_rel=='series'){$('td:first','#nf_search_results tr.column_titles').html('Series name').next().html('Profiles').next().html('Links');}else if(tab_rel=='member'){$('td:first','#nf_search_results tr.column_titles').html('Member username').next().html('').next().html('Last login');}else if(tab_rel=='product'){$('td:first','#nf_search_results tr.column_titles').html('Product name').next().html('Platform').next().html('');}};format_search_results=function(tab_rel){$('#nf_search_results table').addClass(tab_rel);$('#nf_search_results tr.loading').hide();if($('#nf_search_results table tr:not(.column_titles,.loading)').length<1){$('#nf_search_results table').append('<tr class="no_result"><td colspan="3">Nothing found; try a different keyword.</td></tr>');}
$('#nf_search_results table tr:not(.column_titles,.no_result):odd').addClass('odd');$('#nf_search_results table tr:not(.column_titles,.no_result):even').addClass('even');$('#nf_search_results .timeago').timeago();};perform_search=function(api_connection,callback,tab_rel){if(forum_search_jqXHR!=null){forum_search_jqXHR.abort();}
var keywords=$('input[name="q"]','#neoforums_search').val();if(keywords!=''){var key=tab_rel;var param={keywords:keywords,callback:callback};if(api_connection=='items'){param.type_filter=['Game','Movie'];api_connection='itemtitles';}
if(tab_rel=='post'){var area=$('option:selected','#neoforums_search select[name="area"]').val();if(area=='thread'){var threadid=$('#neoforums_search').data('threadid');api_connection='threads/'+threadid+'/messages';}else if(area=='forum'){var forumid=$('#neoforums_search').data('forumid');api_connection='threadmessages';param.f_forumid=forumid;}else{$('#nf_search_results tr.forumsearch_row,#nf_search_results tr.no_result').remove();$('#nf_search_results tr.loading').hide();$('#nf_search_results table').append('<tr class="no_result"><td colspan="3">This feature is not implemented. You will be redirected to full forum search.</td></tr>');redirect_to_full_forum_search(keywords);return false;}
key+='-'+area;}
if(api_connection=='forums'){param.grouped='true';param.with='grouped_forums';param.include_mod_forums=1;if(nuser.memberid>0){param.user='me';}}
if(typeof(forum_search_result[key])!='undefined'&&forum_search_result[key].kw==keywords){reset_search_results(tab_rel);var json_data=forum_search_result[key].results;eval(json_data);format_search_results(tab_rel);return;}
forum_search_jqXHR=$.ajax({url:'/api_proxy/'+api_connection+'/',data:param,type:'get',beforeSend:function(){reset_search_results(tab_rel);},complete:function(){$('#nf_search_results tr.loading').hide();},success:function(response){format_search_results(tab_rel);ga('send','event','ForumHeaderSearch',tab_rel,keywords);forum_search_result[key]={kw:keywords,results:response};}});}};append_search_result=function(col1,col2,col3){var html_template="<tr class='forumsearch_row'><td class='title'>"+col1+"</td>"+"<td class='col2'>"+col2+"</td>"+"<td>"+col3+"</td></tr>";$('#nf_search_results table').append(html_template);};display_posts=function(json_result){var search_area=$('option:selected','#neoforums_search select').val();for(var i=0;i<json_result.length;i++){var post=json_result[i];var url=(search_area=='thread'||search_area=='post')?post.url:post.thread.url;var subject=post.subject;var body=post.body;if(search_area=='forum'){body+=' <a href="'+post.url+'"><i class="icon-share"></i></a> ';}
var created_by_text=(post.created_by.memberid?"<a href='"+post.created_by.url+"'>"+post.created_by.username+"</a>":post.created_by.username);var posted=post.created;var html_template="<tr class='forumsearch_row'><td class='title'><a href='"+url+"'>"+subject+"</a><div class='text-small'>"+body+"</div></td>"+"<td class='col2' colspan='2'>By "+created_by_text+" <div class='timeago' title='"+posted+"'>"+posted+"</div></td></tr>";$('#nf_search_results table').append(html_template);}};display_threads=function(json_result){for(var i=0;i<json_result.length;i++){var threadname=json_result[i].threadname;var last_posted=json_result[i].last_posted;var url=json_result[i].url;var forumname=json_result[i].forum.name;var forum_url=json_result[i].forum.url;append_search_result("<a href='"+url+"'>"+threadname+"</a>","<a href='"+forum_url+"'>"+forumname+"</a>","<span class='timeago' title='"+last_posted+"'>"+last_posted+"</span>");}};display_forums=function(json_result){for(var i=0;i<json_result.length;i++){var forum=json_result[i];var forumid=forum.forumid;var forumname=forum.name;var forum_url=forum.url;var platform=(forum.platform!=null?forum.platform:'');if(forum.platform!=null&&forum.with!=null&&forum.with.grouped_forums!=null&&forum.with.grouped_forums.length>0){for(var p=0;p<forum.with.grouped_forums.length;p++){platform+=', '+forum.with.grouped_forums[p].platform;}
if(forum.with.grouped_forums.length>2){platform='<span title="'+platform+'">Multi-platforms</span>';}}
var last_posted=(forum.lastpost_date!=null?forum.lastpost_date:'');var fav_pin_buttons='';if(nuser.memberid>0){var favourite_class=(typeof forum.connection!='undefined'&&forum.connection.is_favourited)?' is_favourite':'';var favourite_icon=(typeof forum.connection!='undefined'&&forum.connection.is_favourited)?' icon-star':'icon-star-empty';var pinned_class=(typeof forum.connection!='undefined'&&forum.connection.is_followed)?' is_pinned':'';if(!favourite_class&&forum.with!=null&&forum.with.grouped_forums!=null&&forum.with.grouped_forums.length){for(var j=0;j<forum.with.grouped_forums.length;j++){var grouped_forum=forum.with.grouped_forums[j];if(typeof grouped_forum.connection!='undefined'&&grouped_forum.connection.is_favourited){favourite_class=' is_favourite';favourite_icon=' icon-star';pinned_class=(typeof grouped_forum.connnection!='undefined'&&grouped_forum.connection.is_followed?' is_pinned':'');forumid=grouped_forum.forumid;break;}}}
fav_pin_buttons='<a href="" class="forum_favourite'+favourite_class+'" data-forumid="'+forumid+'" style="padding-left:0"><i class="'+favourite_icon+'"></i></a> <a href="" class="forum_pinned'+pinned_class+'" data-forumid="'+forumid+'" style="padding-left:0"><i class="icon-thumb-tack"></i></a> ';}
var last_post='';if(forum.lastpost_thread.threadid>0&&forum.lastpost_thread.threadname!=null){last_post='<a href="'+forum.lastpost_thread.url+'" class="thread_title" title="'+new String(forum.lastpost_thread.threadname).escape()+'">'+forum.lastpost_thread.threadname+'</a>';}
append_search_result(fav_pin_buttons+'<a href="'+forum_url+'">'+forumname+'</a>',platform,last_post+'<div class="timeago" title="'+last_posted+'">'+last_posted+'</div>');}};display_series=function(json_result){for(var i=0;i<json_result.length;i++){var series=json_result[i];var seriesname=series.name;var url=series.url;var profiles=series.profiles_count;var wikiname=series.wiki.name;var wikiurl=series.wiki.url;var forum_url=series.forum_url;var links=[];if(forum_url){links.push('<a href="'+forum_url+'">Forum</a>');}
if(wikiname){links.push('<a href="'+wikiurl+'">Wiki</a>');}
append_search_result('<a href="'+url+'">'+seriesname+'</a>',profiles,links.join(' &middot; '));}};display_members=function(json_result){for(var i=0;i<json_result.length;i++){var member=json_result[i];var username=member.username;var url=member.url;var avatar_img=get_avatar_url_by_size(member.avatar_img,'xs');var last_login=(member.lastlogin?member.lastlogin:'');var is_online=member.is_online;var forum_posts=member.forum_msgs_count;var iso_country=member.iso_country;var col2Data=[];if(forum_posts>0){col2Data.push('<small>'+forum_posts+' posts</small>');}
if(iso_country){col2Data.push('<img src="https://cdn.staticneo.com/neoassets/country/'+iso_country.toLowerCase()+'.gif" alt="" title="'+iso_country+'" />');}
col2Data.push('<a href="https://www.neoseeker.com/forums/index.php?fn=send_pm_thread&manual_username='+encodeURIComponent(username)+'" class="send_pm" title="Send '+String(username).escape()+' a PM"><img src="https://cdn.staticneo.com/f/i/send_pm.gif" alt="" /></a>');append_search_result('<a href="'+url+'"><img src="'+avatar_img+'" class="avatar" data-username="'+username+'" alt="" /></a> <a href="'+url+'"class="username'+(is_online?' status online':'')+'" data-username="'+username+'">'+username+'</a>',col2Data.join(' &middot; '),'<span class="timeago" title="'+last_login+'">'+last_login+'</span>');}};display_products=function(json_result){for(var i=0;i<json_result.length;i++){var productname=json_result[i].name;var minipic=json_result[i].img_minipic;var types=json_result[i].entity_types.join(', ');var url=json_result[i].url;var col2Str=types;if(types=='Game'){col2Str=json_result[i].platforms.join(', ');}
append_search_result('<a href="'+url+'"><img src="'+minipic+'" alt="" width="22" height="20" /></a> <a href="'+url+'">'+productname+'</a>',col2Str,'');}};$('#search_modal').on('post_search',function(){perform_search('threads','display_posts','post');}).on('thread_search',function(){perform_search('threads','display_threads','thread');}).on('forum_search',function(){perform_search('forums','display_forums','forum');}).on('series_search',function(){perform_search('series','display_series','series');}).on('member_search',function(){perform_search('members','display_members','member');}).on('product_search',function(){perform_search('items','display_products','product');});grow_or_shrink_search_input=function(tab){if(tab=='post'){$('#neoforums_search select[name=area]').show();$('#neoforums_search input[name="q"]').css({width:'161px'});}else{$('#neoforums_search select[name=area]').hide();$('#neoforums_search input[name="q"]').css({width:'267px'});}}
submit_form_on_select_change=function(){if($('input[name="q"]','#neoforums_search').val().length>0){$('#neoforums_search').submit();}};$(document).on('submit','#neoforums_search',function(e){e.preventDefault();var tab=$('option:selected','#neoforums_search select[name=searchby]').val();$('#search_modal').trigger(tab+'_search').show();}).on('click','#search_modal .toolbar .nav-pills li a',function(e){e.preventDefault();if($('.fb').length){alert('Sorry, these tabs are disabled when you are editing your pinned forums.');return;}
var tab=$(this).attr('rel');grow_or_shrink_search_input(tab);$('#search_modal .toolbar .nav-pills li').removeClass('active');$(this).parents('li').addClass('active');$('#neoforums_search select[name=searchby] option[value="'+tab+'"]').prop('selected',true);$('#search_modal').trigger(tab+'_search').show();}).on('change','#neoforums_search select[name=area]',submit_form_on_select_change).on('change','#neoforums_search select[name=searchby]',function(){var selected=$('option:selected',this).val();grow_or_shrink_search_input(selected);submit_form_on_select_change();}).on('click','#nf_search_results table.member .send_pm',function(e){e.preventDefault();var username=$(this).parents('tr').children('td.title').children('a.mention').data('username');show_pm_form(username,null,null);});$('input[type="search"]','#neoforums_search').focus(function(){var selected=$('option:selected','#neoforums_search select[name=searchby]').val();$(this).siblings('select').show();grow_or_shrink_search_input(selected);});close_forum_panes=function($clicked){if($('#search_modal').is(':visible')&&!$clicked.parents().hasClass('pane')&&!$clicked.parents('#neoforums_search').length&&!$clicked.parents('#spotlight_forums').length){$('#search_modal').hide();followed_forum_build_links();}};redirect_to_full_forum_search=function(keywords){var searchURL="https://www.neoseeker.com/forums/search.php?";searchURL+='cx=016579983352691578828:t3x3b_bs218';searchURL+='&cof=FORID:9';searchURL+='&sa=Search';searchURL+='&q='+keywords;return window.location.replace(searchURL);};$(document).on('click','.social_share_body .shareobj .show_full_article',function(e){e.preventDefault();$("#full_article",$(this).parents('.shareobj')).removeClass('hidden');$(".shareobj .show_full_article").html('<i class="icon-minus"></i> <strong>show less</strong>').removeClass('show_full_article').addClass('hide_full_article');}).on('click','.social_share_body .shareobj .hide_full_article',function(e){e.preventDefault();$("#full_article",$(this).parents('.shareobj')).addClass('hidden');$(".shareobj .hide_full_article").html('<i class="icon-plus"></i> <strong>show more</strong>').removeClass('hide_full_article').addClass('show_full_article');});});